<!DOCTYPE html><html lang="zh-CN" data-theme="dark"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>正则表达式学习 | 兼一书虫</title><meta name="keywords" content="python,正则表达式,re,匹配,检索,替换和分割,非贪婪匹配,分组匹配"><meta name="author" content="narutohyc"><meta name="copyright" content="narutohyc"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#0d0d0d"><meta name="description" content="python正则表达式的学习记录">
<meta property="og:type" content="article">
<meta property="og:title" content="正则表达式学习">
<meta property="og:url" content="https://study.hycbook.com/article/13105.html">
<meta property="og:site_name" content="兼一书虫">
<meta property="og:description" content="python正则表达式的学习记录">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://pic.hycbook.com/i//hexo/post_cover/%E8%95%BE%E5%A7%8610.webp">
<meta property="article:published_time" content="2022-09-10T12:46:25.000Z">
<meta property="article:modified_time" content="2024-01-16T06:57:42.338Z">
<meta property="article:author" content="narutohyc">
<meta property="article:tag" content="python">
<meta property="article:tag" content="正则表达式">
<meta property="article:tag" content="re">
<meta property="article:tag" content="匹配">
<meta property="article:tag" content="检索">
<meta property="article:tag" content="替换和分割">
<meta property="article:tag" content="非贪婪匹配">
<meta property="article:tag" content="分组匹配">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://pic.hycbook.com/i//hexo/post_cover/%E8%95%BE%E5%A7%8610.webp"><link rel="shortcut icon" href="https://pic.hycbook.com/i//hexo/config_imgs/网站图标.webp"><link rel="canonical" href="https://study.hycbook.com/article/13105"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//hm.baidu.com"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="manifest" href="/manifest.json"/><meta name="msapplication-TileColor" content="#c6ff7a"/><link rel="apple-touch-icon" sizes="180x180" href="https://pic.hycbook.com/i//hexo/source/img/siteicon/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="https://pic.hycbook.com/i//hexo/source/img/siteicon/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="https://pic.hycbook.com/i//hexo/source/img/siteicon/favicon-16x16.png"/><link rel="mask-icon" href="https://pic.hycbook.com/i//hexo/source/img/siteicon/safari-pinned-tab.svg" color="#5bbad5"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?68340394dfd808cea9826e8a57f87aa6";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: {"defaultEncoding":1,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: {"limitDay":120,"position":"top","messagePrev":"It has been","messageNext":"days since the last update, the content of the article may be outdated."},
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":400},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":200,"languages":{"author":"作者: narutohyc","link":"链接: ","source":"来源: 兼一书虫","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '正则表达式学习',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-01-16 14:57:42'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/js-heo@1.0.11/mainColor/heoMainColor.css"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/js-heo@1.0.11/404/404.css"><script src="https://npm.elemecdn.com/echarts@4.9.0/dist/echarts.min.js"></script><link href="https://cdn.bootcdn.net/ajax/libs/toastr.js/2.1.4/toastr.min.css" rel="stylesheet"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/js-heo@1.0.11/categoryBar/categoryBar.css"><link rel="stylesheet" href="/css/hyc_udf.css"><link rel="stylesheet" href="/css/udf_css.css"><link rel="stylesheet" href="/css/year.css"><svg aria-hidden="true" style="position:absolute; overflow:hidden; width:0; height:0"><symbol id="icon-sun" viewBox="0 0 1024 1024"><path d="M960 512l-128 128v192h-192l-128 128-128-128H192v-192l-128-128 128-128V192h192l128-128 128 128h192v192z" fill="#FFD878" p-id="8420"></path><path d="M736 512a224 224 0 1 0-448 0 224 224 0 1 0 448 0z" fill="#FFE4A9" p-id="8421"></path><path d="M512 109.248L626.752 224H800v173.248L914.752 512 800 626.752V800h-173.248L512 914.752 397.248 800H224v-173.248L109.248 512 224 397.248V224h173.248L512 109.248M512 64l-128 128H192v192l-128 128 128 128v192h192l128 128 128-128h192v-192l128-128-128-128V192h-192l-128-128z" fill="#4D5152" p-id="8422"></path><path d="M512 320c105.888 0 192 86.112 192 192s-86.112 192-192 192-192-86.112-192-192 86.112-192 192-192m0-32a224 224 0 1 0 0 448 224 224 0 0 0 0-448z" fill="#4D5152" p-id="8423"></path></symbol><symbol id="icon-moon" viewBox="0 0 1024 1024"><path d="M611.370667 167.082667a445.013333 445.013333 0 0 1-38.4 161.834666 477.824 477.824 0 0 1-244.736 244.394667 445.141333 445.141333 0 0 1-161.109334 38.058667 85.077333 85.077333 0 0 0-65.066666 135.722666A462.08 462.08 0 1 0 747.093333 102.058667a85.077333 85.077333 0 0 0-135.722666 65.024z" fill="#FFB531" p-id="11345"></path><path d="M329.728 274.133333l35.157333-35.157333a21.333333 21.333333 0 1 0-30.165333-30.165333l-35.157333 35.157333-35.114667-35.157333a21.333333 21.333333 0 0 0-30.165333 30.165333l35.114666 35.157333-35.114666 35.157334a21.333333 21.333333 0 1 0 30.165333 30.165333l35.114667-35.157333 35.157333 35.157333a21.333333 21.333333 0 1 0 30.165333-30.165333z" fill="#030835" p-id="11346"></path></symbol></svg><!-- hexo injector head_end start --><link rel="stylesheet" href="https://cdn.cbd.int/hexo-butterfly-tag-plugins-plus@latest/lib/assets/font-awesome-animation.min.css" media="defer" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.cbd.int/hexo-butterfly-tag-plugins-plus@latest/lib/tag_plugins.css" media="defer" onload="this.media='all'"><script src="https://cdn.cbd.int/hexo-butterfly-tag-plugins-plus@latest/lib/assets/carousel-touch.js"></script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://pic.hycbook.com/i/hexo/person_img/兼一头像.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">122</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">171</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">9</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-fangwu"></use></svg><span> 首页</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);" rel="external nofollow noreferrer"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-wenzhang1">             </use></svg><span> 文章</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-guidang">                   </use></svg><span> 归档</span></a></li><li><a class="site-page child" href="/categories"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-fenlei">                   </use></svg><span> 分类</span></a></li><li><a class="site-page child" href="/tags"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-biaoqian">                   </use></svg><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);" rel="external nofollow noreferrer"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-yuedu">             </use></svg><span> gitbook版</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://common.hycbook.com"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-guidang">                   </use></svg><span> common</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://dl.hycbook.com"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-biaoqian">                   </use></svg><span> deep learning</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://python.hycbook.com"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-fenlei">                   </use></svg><span> python</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://snooby.hycbook.com"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-zhifengche">                   </use></svg><span> snooby</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://hycbook.flowus.cn"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-wenzhang">                   </use></svg><span> flowus</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);" rel="external nofollow noreferrer"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-xuegao">             </use></svg><span> 娱乐</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-yinle">                   </use></svg><span> 音乐</span></a></li><li><a class="site-page child" href="/bangumis"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-wodezhuifan">                   </use></svg><span> 追番</span></a></li><li><a class="site-page child" href="/gallery"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-xiangce">                   </use></svg><span> 相册</span></a></li><li><a class="site-page child" href="/video"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-shipin">                   </use></svg><span> 视频</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/charts"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-xigua"></use></svg><span> 统计图</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);" rel="external nofollow noreferrer"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-suannai">             </use></svg><span> 网盘</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://pan.hycbook.com"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-guidang">                   </use></svg><span> 私月盘</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://share.hycbook.com"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-zhifengche">                   </use></svg><span> 共享盘</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);" rel="external nofollow noreferrer"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-zhifeiji">             </use></svg><span> 导航</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/comments"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-TIFFANYSROOM_huaban">                   </use></svg><span> 留言板</span></a></li><li><a class="site-page child" href="/link"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-friends">                   </use></svg><span> 友链</span></a></li><li><a class="site-page child" href="/about"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-aixin">                   </use></svg><span> 关于</span></a></li></ul></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://pic.hycbook.com/i//hexo/post_imgs/蕾姆10.webp')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">兼一书虫</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-fangwu"></use></svg><span> 首页</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);" rel="external nofollow noreferrer"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-wenzhang1">             </use></svg><span> 文章</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-guidang">                   </use></svg><span> 归档</span></a></li><li><a class="site-page child" href="/categories"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-fenlei">                   </use></svg><span> 分类</span></a></li><li><a class="site-page child" href="/tags"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-biaoqian">                   </use></svg><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);" rel="external nofollow noreferrer"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-yuedu">             </use></svg><span> gitbook版</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://common.hycbook.com"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-guidang">                   </use></svg><span> common</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://dl.hycbook.com"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-biaoqian">                   </use></svg><span> deep learning</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://python.hycbook.com"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-fenlei">                   </use></svg><span> python</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://snooby.hycbook.com"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-zhifengche">                   </use></svg><span> snooby</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://hycbook.flowus.cn"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-wenzhang">                   </use></svg><span> flowus</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);" rel="external nofollow noreferrer"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-xuegao">             </use></svg><span> 娱乐</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-yinle">                   </use></svg><span> 音乐</span></a></li><li><a class="site-page child" href="/bangumis"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-wodezhuifan">                   </use></svg><span> 追番</span></a></li><li><a class="site-page child" href="/gallery"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-xiangce">                   </use></svg><span> 相册</span></a></li><li><a class="site-page child" href="/video"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-shipin">                   </use></svg><span> 视频</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/charts"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-xigua"></use></svg><span> 统计图</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);" rel="external nofollow noreferrer"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-suannai">             </use></svg><span> 网盘</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://pan.hycbook.com"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-guidang">                   </use></svg><span> 私月盘</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://share.hycbook.com"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-zhifengche">                   </use></svg><span> 共享盘</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);" rel="external nofollow noreferrer"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-zhifeiji">             </use></svg><span> 导航</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/comments"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-TIFFANYSROOM_huaban">                   </use></svg><span> 留言板</span></a></li><li><a class="site-page child" href="/link"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-friends">                   </use></svg><span> 友链</span></a></li><li><a class="site-page child" href="/about"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-aixin">                   </use></svg><span> 关于</span></a></li></ul></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">正则表达式学习</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-09-10T12:46:25.000Z" title="发表于 2022-09-10 20:46:25">2022-09-10</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-01-16T06:57:42.338Z" title="更新于 2024-01-16 14:57:42">2024-01-16</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/python/">python</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">8k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>34分钟</span></span><span class="post-meta-separator">|</span><span id="" data-flag-title="正则表达式学习"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="twikoo_visitors"><i class="fa-solid fa-spinner fa-spin"></i></span></span><span class="post-meta-separator">|</span><span class="post-meta-commentcount"><i class="far fa-comments fa-fw post-meta-icon"></i><span class="post-meta-label">评论数:</span><a href="/article/13105.html#post-comment"><span id="twikoo-count"><i class="fa-solid fa-spinner fa-spin"></i></span></a></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><hr>
<h1 id="正则表达式概念"><a href="#正则表达式概念" class="headerlink" title="正则表达式概念"></a>正则表达式概念</h1><blockquote>
<ol>
<li><a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.imooc.com/learn/550">python正则表达式</a></li>
<li><a target="_blank" rel="noopener external nofollow noreferrer" href="http://www.zjmainstay.cn/regexp-lookaround">深入理解正则表达式环视的概念与用法</a></li>
<li><a target="_blank" rel="noopener external nofollow noreferrer" href="https://mp.weixin.qq.com/s/7ggnL6N6WGh35yLkoizbQw">资源 | 正则表达式的功法大全</a></li>
<li><a target="_blank" rel="noopener external nofollow noreferrer" href="https://regex101.com/">在线正则表达式验证网站</a></li>
</ol>
<p>概念定义</p>
</blockquote>
<p>使用单个字符串来描述匹配某个句法规则的字符串，是对字符串操作的一种逻辑公式</p>
<blockquote>
<p>应用场景</p>
</blockquote>
<p>处理文本和数据，提高复杂文本分析的效率</p>
<blockquote>
<p>正则表达式过程</p>
</blockquote>
<p>依次拿出表达式和文本中的字符比较，如果每一个字符都能匹配，则匹配成功；否则匹配失败</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*</span></span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">from</span> IPython.core.interactiveshell <span class="keyword">import</span> InteractiveShell</span><br><span class="line"></span><br><span class="line">InteractiveShell.ast_node_interactivity = <span class="string">&quot;all&quot;</span>  <span class="comment"># 可同时输出多个结果</span></span><br><span class="line">pattern_s = <span class="string">r&#x27;imooc&#x27;</span>  <span class="comment"># 定义正则表达式</span></span><br><span class="line">pattern_r = re.<span class="built_in">compile</span>(pattern_s)  <span class="comment"># 编译正则表达式</span></span><br><span class="line">str1 = <span class="string">&#x27;imooc book&#x27;</span>  <span class="comment"># 需要查找的原始字符串</span></span><br><span class="line">match_r = pattern_r.<span class="keyword">match</span>(str1)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;match_r.group(): <span class="subst">&#123;match_r.group()&#125;</span>&#x27;</span>)</span><br><span class="line"></span><br><span class="line">match_r.group(): imooc</span><br></pre></td></tr></table></figure>
<h1 id="正则元字符"><a href="#正则元字符" class="headerlink" title="正则元字符"></a>正则元字符</h1><h2 id="内容匹配"><a href="#内容匹配" class="headerlink" title="内容匹配"></a>内容匹配</h2><div class="table-container">
<table>
<thead>
<tr>
<th><strong>正则表达式</strong></th>
<th><strong>代表的匹配字符</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>.</td>
<td>匹配任意字符（不包括换行符）</td>
</tr>
<tr>
<td>[0-9]</td>
<td>0-9的数字</td>
</tr>
<tr>
<td>[a-z]</td>
<td>小写字母</td>
</tr>
<tr>
<td>[A-Z]</td>
<td>大写字母</td>
</tr>
<tr>
<td>\d</td>
<td>匹配数字，等同于[0-9]</td>
</tr>
<tr>
<td>\D</td>
<td>匹配非数字，等同于[\^0-9]</td>
</tr>
<tr>
<td>\w</td>
<td>匹配大小写字母、数字和下划线，等同于[a-z0-9A-Z_]</td>
</tr>
<tr>
<td>\W</td>
<td>匹配非大小写字母、数字和下划线，等同于[\^a-z0-9A-Z_]</td>
</tr>
<tr>
<td>\s</td>
<td>匹配空白</td>
</tr>
<tr>
<td>\S</td>
<td>匹配非空白</td>
</tr>
<tr>
<td>\u4e00-\u9fff</td>
<td>匹配中文字符</td>
</tr>
</tbody>
</table>
</div>
<h2 id="个数匹配"><a href="#个数匹配" class="headerlink" title="个数匹配"></a>个数匹配</h2><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left"><strong>正则表达式</strong></th>
<th style="text-align:left"><strong>代表的匹配字符</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">*</td>
<td style="text-align:left">匹配前面的字符或者子表达式0次或多次</td>
</tr>
<tr>
<td style="text-align:left">+</td>
<td style="text-align:left">匹配前一个字符或子表达式一次或多次</td>
</tr>
<tr>
<td style="text-align:left">?</td>
<td style="text-align:left">匹配前一个字符或子表达式0次或1次重复</td>
</tr>
<tr>
<td style="text-align:left">{n}</td>
<td style="text-align:left">匹配前一个字符或子表达式n次</td>
</tr>
<tr>
<td style="text-align:left">{m,n}</td>
<td style="text-align:left">匹配前一个字符或子表达式m至n次</td>
</tr>
<tr>
<td style="text-align:left">{n,}</td>
<td style="text-align:left">匹配前一个字符或者子表达式至少n次</td>
</tr>
<tr>
<td style="text-align:left">*? / +? / ??</td>
<td style="text-align:left">惰性匹配上一个</td>
</tr>
</tbody>
</table>
</div>
<h2 id="位置匹配"><a href="#位置匹配" class="headerlink" title="位置匹配"></a>位置匹配</h2><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left"><strong>正则表达式</strong></th>
<th style="text-align:left"><strong>代表的匹配字符</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">^</td>
<td style="text-align:left">匹配字符串开头, 多行模式下匹配每一行的开始</td>
</tr>
<tr>
<td style="text-align:left">$</td>
<td style="text-align:left">匹配字符串结尾, 多行模式下匹配每一行的结束</td>
</tr>
<tr>
<td style="text-align:left">\A / \Z</td>
<td style="text-align:left">指定字符串必须出现在开头/结尾</td>
</tr>
<tr>
<td style="text-align:left">\b</td>
<td style="text-align:left">匹配位于单词开始或结束位置的空字符串</td>
</tr>
<tr>
<td style="text-align:left">\B</td>
<td style="text-align:left">匹配不位于单词开始或结束位置的空字符串</td>
</tr>
</tbody>
</table>
</div>
<h2 id="分组匹配"><a href="#分组匹配" class="headerlink" title="分组匹配"></a>分组匹配</h2><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left"><strong>正则表达式</strong></th>
<th style="text-align:left"><strong>代表的匹配字符</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">&#124;</td>
<td style="text-align:left">匹配左右任意一个表达式</td>
</tr>
<tr>
<td style="text-align:left">(ab)</td>
<td style="text-align:left">括号里的表达式作为一个分组</td>
</tr>
<tr>
<td style="text-align:left">\&lt;number&gt;</td>
<td style="text-align:left">引用编号为num的分组匹配到的字符串</td>
</tr>
<tr>
<td style="text-align:left">(?P&lt;name&gt;)</td>
<td style="text-align:left">分组起别名</td>
</tr>
<tr>
<td style="text-align:left">(?P=name)</td>
<td style="text-align:left">引用别名为name的分组匹配字符串</td>
</tr>
<tr>
<td style="text-align:left">[ ]</td>
<td style="text-align:left">可匹配其中任意一个字符</td>
</tr>
</tbody>
</table>
</div>
<h2 id="转义匹配"><a href="#转义匹配" class="headerlink" title="转义匹配"></a>转义匹配</h2><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left"><strong>正则表达式</strong></th>
<th style="text-align:left"><strong>代表的匹配字符</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">\</td>
<td style="text-align:left">转义字符，如\.只能匹配.，不能再匹配任意字符</td>
</tr>
</tbody>
</table>
</div>
<h1 id="基本使用"><a href="#基本使用" class="headerlink" title="基本使用"></a>基本使用</h1><h2 id="预编译"><a href="#预编译" class="headerlink" title="预编译"></a>预编译</h2><p>compile 函数用于编译正则表达式，生成一个正则表达式(Pattern)对象，供 match() 和 search() 这两个函数使用</p>
<p>如果重复多次地使用正则表达式，最好是使用compile函数把正则表达式编译成对象re.Pattern，这样会大大地提高搜索的效率</p>
<blockquote>
<p>re.compile(pattern, flags=0)</p>
</blockquote>
<p><strong>属性说明</strong></p>
<ul>
<li><strong>flags</strong>：编译时指定的模式</li>
<li><strong>groupindex</strong>：以正则表达式中有别名的组的别名为键、以该组对应的编号为值的字典，没有别名的组不包含在内。</li>
<li><strong>groups</strong>：正则表达式中分组的数量</li>
<li><strong>pattern</strong>：编译时用的正则表达式</li>
</ul>
<p><strong>方法说明</strong></p>
<ul>
<li>findall、finditer、match、search、split、sub、subn 等函数</li>
</ul>
<blockquote>
<p>例子</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*</span></span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line">s = <span class="string">&#x27;Hello, Mr.Gumby : 2016/10/26&#x27;</span></span><br><span class="line">pat = <span class="string">&#x27;&#x27;&#x27;(?:        # 构造一个不捕获分组 用于使用 |</span></span><br><span class="line"><span class="string">              (?P&lt;name&gt;\w+\.\w+)    # 匹配 Mr.Gumby</span></span><br><span class="line"><span class="string">              |     # 或</span></span><br><span class="line"><span class="string">              (?P&lt;no&gt;\s+\.\w+) # 一个匹配不到的命名分组</span></span><br><span class="line"><span class="string">              )</span></span><br><span class="line"><span class="string">              .*? # 匹配  : </span></span><br><span class="line"><span class="string">              (\d+) # 匹配 2016</span></span><br><span class="line"><span class="string">              &#x27;&#x27;&#x27;</span></span><br><span class="line">p = re.<span class="built_in">compile</span>(pat, re.X)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;p.flags: <span class="subst">&#123;p.flags&#125;</span>&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;p.groupindex: <span class="subst">&#123;p.groupindex&#125;</span>&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;p.groups: <span class="subst">&#123;p.groups&#125;</span>&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;p.pattern: <span class="subst">&#123;p.pattern&#125;</span>&#x27;</span>)</span><br><span class="line"></span><br><span class="line">p.flags: <span class="number">96</span></span><br><span class="line">p.groupindex: &#123;<span class="string">&#x27;name&#x27;</span>: <span class="number">1</span>, <span class="string">&#x27;no&#x27;</span>: <span class="number">2</span>&#125;</span><br><span class="line">p.groups: <span class="number">3</span></span><br><span class="line">p.pattern: (?:        <span class="comment"># 构造一个不捕获分组 用于使用 |</span></span><br><span class="line">              (?P&lt;name&gt;\w+\.\w+)    <span class="comment"># 匹配 Mr.Gumby</span></span><br><span class="line">              |     <span class="comment"># 或</span></span><br><span class="line">              (?P&lt;no&gt;\s+\.\w+) <span class="comment"># 一个匹配不到的命名分组</span></span><br><span class="line">              )</span><br><span class="line">              .*? <span class="comment"># 匹配  : </span></span><br><span class="line">              (\d+) <span class="comment"># 匹配 2016</span></span><br></pre></td></tr></table></figure>
<h2 id="匹配模式"><a href="#匹配模式" class="headerlink" title="匹配模式"></a>匹配模式</h2><blockquote>
<p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://zhuanlan.zhihu.com/p/70680488?ivk_sa=1024320u">Python正则表达式，请不要再用re.compile了</a></p>
</blockquote>
<p>在正则表达式中，采用预编译的优势就是可以节约时间，提高效率</p>
<p><code>re.compile(pattern, flags=0)</code>给定一个正则表达式 pattern</p>
<p>指定使用的模式 flags 默认为0 即不使用任何模式，然后会返回一个 SRE_Pattern对象</p>
<blockquote>
<p><strong>参数说明</strong></p>
</blockquote>
<ul>
<li><strong>pattern</strong>: 一个字符串形式的正则表达式</li>
<li><strong>flags</strong>: 可选，表示匹配模式，比如忽略大小写，多行模式等，使用按位或运算符 | 同时添加多个模式,具体参数为：<ul>
<li><strong>re.I</strong>：数值2，忽略大小写</li>
<li><strong>re.L</strong>：数值4，表示特殊字符集 \w, \W, \b, \B, \s, \S 依赖于当前环境</li>
<li><strong>re.M</strong>：数值8，多行模式</li>
<li><strong>re.S</strong>：数值16，即为 . 并且包括换行符在内的任意字符（. 不包括换行符）</li>
<li><strong>re.U</strong>：数值32，表示特殊字符集 \w, \W, \b, \B, \d, \D, \s, \S 依赖于 Unicode 字符属性数据库</li>
<li><strong>re.X</strong>：数值64，为了增加可读性，忽略空格和 # 后面的注释</li>
</ul>
</li>
</ul>
<h3 id="忽略大小写re-I"><a href="#忽略大小写re-I" class="headerlink" title="忽略大小写re.I"></a>忽略大小写re.I</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># I: IGNORECASE， 忽略大小写的匹配模式</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># -*- coding: utf-8 -*</span></span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line">str1 = <span class="string">&#x27;hello World!&#x27;</span></span><br><span class="line">pattern_s = <span class="string">&quot;hello world!&quot;</span></span><br><span class="line">pattern_r = re.<span class="built_in">compile</span>(pattern_s, re.I)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;pattern_r.match(str1).group(): <span class="subst">&#123;pattern_r.<span class="keyword">match</span>(str1).group()&#125;</span>&#x27;</span>)</span><br><span class="line"><span class="comment"># 或在正则表达式中指定模式以及注释</span></span><br><span class="line">pattern_s = <span class="string">&quot;(?#注释)(?i)hello world!&quot;</span></span><br><span class="line">pattern_r = re.<span class="built_in">compile</span>(pattern_s)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;pattern_r.match(str1).group(): <span class="subst">&#123;pattern_r.<span class="keyword">match</span>(str1).group()&#125;</span>&#x27;</span>)</span><br><span class="line"></span><br><span class="line">pattern_r.<span class="keyword">match</span>(str1).group(): hello World!</span><br><span class="line">pattern_r.<span class="keyword">match</span>(str1).group(): hello World!</span><br></pre></td></tr></table></figure>
<h3 id="字符集本地化re-L"><a href="#字符集本地化re-L" class="headerlink" title="字符集本地化re.L"></a>字符集本地化re.L</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># L: LOCALE， 字符集本地化。这个功能是为了支持多语言版本的字符集使用环境的，比如在转义符\w，在英文环境下，它代表[a-zA-Z0-9_]，即所以英文字符和数字。</span></span><br><span class="line"><span class="comment"># 如果在一个法语环境下使用，缺省设置下，不能匹配&quot;é&quot; 或&quot;ç&quot;。加上这L选项和就可以匹配了。不过这个对于中文环境似乎没有什么用，它仍然不能匹配中文字符。</span></span><br></pre></td></tr></table></figure>
<h3 id="多行模式re-M"><a href="#多行模式re-M" class="headerlink" title="多行模式re.M"></a>多行模式re.M</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># M: MULTILINE，多行模式, 改变 ^ 和 $ 的行为</span></span><br><span class="line"><span class="comment"># -*- coding: utf-8 -*</span></span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line">str1 = <span class="string">&#x27;&#x27;&#x27;first line1</span></span><br><span class="line"><span class="string">second line2</span></span><br><span class="line"><span class="string">third line3&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="comment"># ^</span></span><br><span class="line">regex_start = re.<span class="built_in">compile</span>(<span class="string">&quot;^\w+&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;regex_start.findall(str1): <span class="subst">&#123;regex_start.findall(str1)&#125;</span>&#x27;</span>)</span><br><span class="line">regex_start_m = re.<span class="built_in">compile</span>(<span class="string">&quot;^\w+&quot;</span>, re.M)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;regex_start_m.findall(str1): <span class="subst">&#123;regex_start_m.findall(str1)&#125;</span>&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># $</span></span><br><span class="line">regex_end = re.<span class="built_in">compile</span>(<span class="string">&quot;\w+$&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;regex_end.findall(str1): <span class="subst">&#123;regex_end.findall(str1)&#125;</span>&#x27;</span>)</span><br><span class="line">regex_end_m = re.<span class="built_in">compile</span>(<span class="string">&quot;\w+$&quot;</span>, re.M)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;regex_end_m.findall(str1): <span class="subst">&#123;regex_end_m.findall(str1)&#125;</span>&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">regex_start.findall(str1): [<span class="string">&#x27;first&#x27;</span>]</span><br><span class="line">regex_start_m.findall(str1): [<span class="string">&#x27;first&#x27;</span>, <span class="string">&#x27;second&#x27;</span>, <span class="string">&#x27;third&#x27;</span>]</span><br><span class="line">regex_end.findall(str1): [<span class="string">&#x27;line3&#x27;</span>]</span><br><span class="line">regex_end_m.findall(str1): [<span class="string">&#x27;line1&#x27;</span>, <span class="string">&#x27;line2&#x27;</span>, <span class="string">&#x27;line3&#x27;</span>]</span><br></pre></td></tr></table></figure>
<h3 id="所有字符re-S"><a href="#所有字符re-S" class="headerlink" title="所有字符re.S"></a>所有字符re.S</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># S: DOTALL，此模式下 &#x27;.&#x27; 的匹配不受限制，可匹配任何字符，包括换行符</span></span><br><span class="line"><span class="comment"># -*- coding: utf-8 -*</span></span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line">str2 = <span class="string">&#x27;&#x27;&#x27;first line1</span></span><br><span class="line"><span class="string">second line2</span></span><br><span class="line"><span class="string">third line3&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="comment"># 此时.无法匹配换行符</span></span><br><span class="line">regex = re.<span class="built_in">compile</span>(<span class="string">&quot;.+&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;regex.findall(str2): <span class="subst">&#123;regex.findall(str2)&#125;</span>&#x27;</span>)</span><br><span class="line"><span class="comment"># 此时.匹配换行符</span></span><br><span class="line">regex_dotall = re.<span class="built_in">compile</span>(<span class="string">&quot;.+&quot;</span>, re.S)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;regex_dotall.findall(str2): <span class="subst">&#123;regex_dotall.findall(str2)&#125;</span>&#x27;</span>)</span><br><span class="line"></span><br><span class="line">regex.findall(str2): [<span class="string">&#x27;first line1&#x27;</span>, <span class="string">&#x27;second line2&#x27;</span>, <span class="string">&#x27;third line3&#x27;</span>]</span><br><span class="line">regex_dotall.findall(str2): [<span class="string">&#x27;first line1\nsecond line2\nthird line3&#x27;</span>]</span><br></pre></td></tr></table></figure>
<h3 id="冗余模式re-X"><a href="#冗余模式re-X" class="headerlink" title="冗余模式re.X"></a>冗余模式re.X</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># X: VERBOSE，冗余模式， 忽略正则表达式中的空白和#号注释，如写一个匹配邮箱的正则表达式</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># -*- coding: utf-8 -*</span></span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line">email_regex = re.<span class="built_in">compile</span>(<span class="string">&quot;[\w+\.]+@[a-zA-Z\d]+\.(com|cn)&quot;</span>)</span><br><span class="line"></span><br><span class="line">email_regex = re.<span class="built_in">compile</span>(<span class="string">&quot;&quot;&quot;[\w+\.]+  # 匹配@符前的部分</span></span><br><span class="line"><span class="string">                            @  # @符</span></span><br><span class="line"><span class="string">                            [a-zA-Z\d]+  # 邮箱类别</span></span><br><span class="line"><span class="string">                            \.(com|cn)   # 邮箱后缀  &quot;&quot;&quot;</span>, re.X)</span><br></pre></td></tr></table></figure>
<h3 id="UNICODE解析re-U"><a href="#UNICODE解析re-U" class="headerlink" title="UNICODE解析re.U"></a>UNICODE解析re.U</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># U: UNICODE，使用 \w, \W, \b, \B 这些元字符时将按照 UNICODE 定义的属性.</span></span><br></pre></td></tr></table></figure>
<h2 id="re-Match类"><a href="#re-Match类" class="headerlink" title="re.Match类"></a>re.Match类</h2><p>若匹配成功，match/search返回的是Match对象，finditer返回的也是Match对象的迭代器</p>
<p>获取匹配结果需要调用Match对象的group()、groups或group(index)方法</p>
<blockquote>
<p><strong>属性说明</strong></p>
</blockquote>
<ul>
<li><strong>endpos</strong>: 本次搜索结束位置索引</li>
<li><strong>lastgroup</strong>: 本次搜索匹配到的最后一个分组的别名</li>
<li><strong>lastindex</strong>: 本次搜索匹配到的最后一个分组的索引</li>
<li><strong>pos</strong>: 本次搜索开始位置索引</li>
<li><strong>re</strong>: 本次搜索使用的 SRE_Pattern 对象</li>
<li><strong>regs</strong>: 列表，元素为元组，包含本次搜索匹配到的所有分组的起止位置</li>
</ul>
<blockquote>
<p><strong>方法说明</strong></p>
</blockquote>
<ul>
<li><p><strong>end([group=0])</strong>：返回指定分组的结束位置，默认返回正则表达式所匹配到的最后一个字符的索引</p>
</li>
<li><p><strong>expand(template)</strong>：根据模版返回相应的字符串，类似与 sub 函数里面的 repl， 可使用 \1 或者 \g 来选择分组</p>
</li>
<li><p><strong>group([group1, …])</strong>：根据提供的索引或名字返回响应分组的内容</p>
<p>默认返回 start() 到 end() 之间的字符串， 提供多个参数将返回一个元组</p>
</li>
<li><p><strong>groupdict([default=None])</strong>：返回一个包含所有匹配到的命名分组的字典，没有命名的分组不包含在内</p>
<p>key 为组名， value 为匹配到的内容，参数 default 为没有参与本次匹配的命名分组提供默认值</p>
</li>
<li><p><strong>groups([default=None])</strong>：以元组形式返回每一个分组匹配到的字符串，包括没有参与匹配的分组，其值为 default</p>
</li>
<li><p><strong>span([group])</strong>：返回指定分组的起止位置组成的元组，默认返回由 start() 和 end() 组成的元组</p>
</li>
<li><p><strong>start([group])</strong>：返回指定分组的开始位置，默认返回正则表达式所匹配到的第一个字符的索引</p>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*</span></span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line">s = <span class="string">&#x27;Hello, Mr.Gumby : 2016/10/26&#x27;</span></span><br><span class="line">m = re.search(<span class="string">&#x27;, (?P&lt;name&gt;\w+\.\w+).*?(\d+)&#x27;</span>, s)</span><br><span class="line"><span class="comment"># 本次搜索的结束位置索引</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;m.endpos: <span class="subst">&#123;m.endpos&#125;</span>&#x27;</span>)</span><br><span class="line"><span class="comment"># 本次搜索匹配到的最后一个分组的别名</span></span><br><span class="line"><span class="comment"># 本次匹配最后一个分组没有别名</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;m.lastgroup: <span class="subst">&#123;m.lastgroup&#125;</span>&#x27;</span>)</span><br><span class="line"><span class="comment"># 本次搜索匹配到的最后一个分组的索引</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;m.lastindex: <span class="subst">&#123;m.lastindex&#125;</span>&#x27;</span>)</span><br><span class="line"><span class="comment"># 本次搜索开始位置索引</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;m.pos: <span class="subst">&#123;m.pos&#125;</span>&#x27;</span>)</span><br><span class="line"><span class="comment"># 本次搜索使用的 SRE_Pattern 对象</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;m.re: <span class="subst">&#123;m.re&#125;</span>&#x27;</span>)</span><br><span class="line"><span class="comment"># 列表，元素为元组，包含本次搜索匹配到的所有分组的起止位置 第一个元组为正则表达式匹配范围</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;m.regs: <span class="subst">&#123;m.regs&#125;</span>&#x27;</span>)</span><br><span class="line"><span class="comment"># 本次搜索操作的字符串</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;m.string: <span class="subst">&#123;m.string&#125;</span>&#x27;</span>)</span><br><span class="line"></span><br><span class="line">m.endpos: <span class="number">28</span></span><br><span class="line">m.lastgroup: <span class="literal">None</span></span><br><span class="line">m.lastindex: <span class="number">2</span></span><br><span class="line">m.pos: <span class="number">0</span></span><br><span class="line">m.re: re.<span class="built_in">compile</span>(<span class="string">&#x27;, (?P&lt;name&gt;\\w+\\.\\w+).*?(\\d+)&#x27;</span>)</span><br><span class="line">m.regs: ((<span class="number">5</span>, <span class="number">22</span>), (<span class="number">7</span>, <span class="number">15</span>), (<span class="number">18</span>, <span class="number">22</span>))</span><br><span class="line">m.string: Hello, Mr.Gumby : <span class="number">2016</span>/<span class="number">10</span>/<span class="number">26</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*</span></span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line">s = <span class="string">&#x27;Hello, Mr.Gumby : 2016/10/26&#x27;</span></span><br><span class="line">m = re.search(<span class="string">&#x27;&#x27;&#x27;(?:        # 构造一个不捕获分组 用于使用 |</span></span><br><span class="line"><span class="string">              (?P&lt;name&gt;\w+\.\w+)    # 匹配 Mr.Gumby</span></span><br><span class="line"><span class="string">              |     # 或</span></span><br><span class="line"><span class="string">              (?P&lt;no&gt;\s+\.\w+) # 一个匹配不到的命名分组</span></span><br><span class="line"><span class="string">              )</span></span><br><span class="line"><span class="string">              .*? # 匹配  : </span></span><br><span class="line"><span class="string">              (\d+) # 匹配 2016</span></span><br><span class="line"><span class="string">              &#x27;&#x27;&#x27;</span>,</span><br><span class="line">              s, re.X)</span><br><span class="line"><span class="comment"># 返回指定分组的结束位置，默认返回正则表达式所匹配到的最后一个字符的索引</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;m.end(): <span class="subst">&#123;m.end()&#125;</span>&#x27;</span>)</span><br><span class="line"><span class="comment"># 根据模版返回相应的字符串，类似sub()的 repl,可使用 \1 或者 \g&lt;name&gt; 来选择分组</span></span><br><span class="line">mExpend = m.expand(<span class="string">&#x27;my name is \\1&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;m.expand(&#x27;my name is \\1&#x27;): <span class="subst">&#123;mExpend&#125;</span>&quot;</span>)</span><br><span class="line"><span class="comment"># 根据提供的索引或名字返回响应分组的内容，默认返回 start() 到 end() 之间的字符串，</span></span><br><span class="line"><span class="comment"># 提供多个参数将返回一个元组</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;m.group(): <span class="subst">&#123;m.group()&#125;</span>&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;m.group(1, 2): <span class="subst">&#123;m.group(<span class="number">1</span>, <span class="number">2</span>)&#125;</span>&#x27;</span>)</span><br><span class="line"><span class="comment"># 返回一个包含所有匹配到的命名分组的字典，没有命名的分组不包含在内，key 为组名，</span></span><br><span class="line"><span class="comment"># value 为匹配到的内容，参数 default 为没有参与本次匹配的命名分组提供默认值</span></span><br><span class="line">m.groupdict(<span class="string">&#x27;default_string&#x27;</span>)</span><br><span class="line"><span class="comment"># 以元组形式返回每一个分组匹配到的字符串，包括没有参与匹配的分组，其值为 default</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;m.groups(&#x27;default_string&#x27;): <span class="subst">&#123;m.groups(<span class="string">&#x27;default_string&#x27;</span>)&#125;</span>&quot;</span>)</span><br><span class="line"><span class="comment"># 返回指定分组的起止未知组成的元组，默认返回由 start() 和 end() 组成的元组</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;m.span(3): <span class="subst">&#123;m.span(<span class="number">3</span>)&#125;</span>&#x27;</span>)</span><br><span class="line"><span class="comment"># 返回指定分组的开始位置，默认返回正则表达式所匹配到的第一个字符的索引</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;m.start(3): <span class="subst">&#123;m.start(<span class="number">3</span>)&#125;</span>&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">m.end(): <span class="number">22</span></span><br><span class="line">m.expand(<span class="string">&#x27;my name is \1&#x27;</span>): my name <span class="keyword">is</span> Mr.Gumby</span><br><span class="line">m.group(): Mr.Gumby : <span class="number">2016</span></span><br><span class="line">m.group(<span class="number">1</span>, <span class="number">2</span>): (<span class="string">&#x27;Mr.Gumby&#x27;</span>, <span class="literal">None</span>)</span><br><span class="line">m.groups(<span class="string">&#x27;default_string&#x27;</span>): (<span class="string">&#x27;Mr.Gumby&#x27;</span>, <span class="string">&#x27;default_string&#x27;</span>, <span class="string">&#x27;2016&#x27;</span>)</span><br><span class="line">m.span(<span class="number">3</span>): (<span class="number">18</span>, <span class="number">22</span>)</span><br><span class="line">m.start(<span class="number">3</span>): <span class="number">18</span></span><br></pre></td></tr></table></figure>
<h2 id="匹配"><a href="#匹配" class="headerlink" title="匹配"></a>匹配</h2><h3 id="match"><a href="#match" class="headerlink" title="match"></a>match</h3><blockquote>
<p>re.match(pattern, string[, flags])</p>
</blockquote>
<p>从<strong>首字母开始匹配</strong>，string如果包含pattern子串，则匹配成功，返回Match对象，失败则返回None，若要完全匹配，pattern要以$结尾</p>
<p><strong>参数说明</strong></p>
<ul>
<li><strong>pattern</strong>：匹配的正则表达式</li>
<li><strong>string</strong>：要匹配的字符串。</li>
<li><strong>flags</strong>：标志位，用于控制正则表达式的匹配方式，如：是否区分大小写，多行匹配等等。参见：正则表达式修饰符 - 可选标志</li>
</ul>
<blockquote>
<p>match函数在string的<strong>开始位置</strong>匹配，如果匹配则返回对象，否则返回None</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#! /usr/bin/env python</span></span><br><span class="line"><span class="comment"># -*- coding=utf-8 -*-</span></span><br><span class="line">   </span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line">   </span><br><span class="line">text = <span class="string">&#x27;python world&#x27;</span></span><br><span class="line">m = re.<span class="keyword">match</span>(<span class="string">r&quot;\w+&quot;</span>, text)</span><br><span class="line"><span class="built_in">print</span>(m.group(<span class="number">0</span>)) <span class="keyword">if</span> m <span class="keyword">else</span> <span class="built_in">print</span>(<span class="string">&#x27;not match&#x27;</span>)</span><br><span class="line"></span><br><span class="line">text = <span class="string">&#x27;#python world&#x27;</span></span><br><span class="line">m = re.<span class="keyword">match</span>(<span class="string">r&quot;\w+&quot;</span>, text)</span><br><span class="line"><span class="built_in">print</span>(m.group(<span class="number">0</span>)) <span class="keyword">if</span> m <span class="keyword">else</span> <span class="built_in">print</span>(<span class="string">&#x27;not match&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line">output: python</span><br><span class="line">output: <span class="keyword">not</span> <span class="keyword">match</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># re.match()函数</span></span><br><span class="line"><span class="comment"># -*- coding: utf-8 -*</span></span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line">str1 = <span class="string">&#x27;333STR1666STR299&#x27;</span></span><br><span class="line">pattern_s = <span class="string">r&#x27;([A-Z]+(\d))&#x27;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;re.match(pattern_s, str1): <span class="subst">&#123;re.<span class="keyword">match</span>(pattern_s, str1)&#125;</span>&#x27;</span>)  <span class="comment"># str1的开头不符合正则，所以结果为None</span></span><br><span class="line"></span><br><span class="line">re.<span class="keyword">match</span>(pattern_s, str1): <span class="literal">None</span></span><br></pre></td></tr></table></figure>
<h3 id="search"><a href="#search" class="headerlink" title="search"></a>search</h3><blockquote>
<p>re.search(pattern, string[, flags])</p>
</blockquote>
<p>若string中包含<strong>pattern子串</strong>，则返回Match对象，否则返回None，注意，如果string中存在<strong>多个</strong>pattern子串，<strong>只返回第一个</strong></p>
<p><strong>参数说明</strong></p>
<ul>
<li><strong>pattern</strong>：匹配的正则表达式</li>
<li><strong>string</strong>：要匹配的字符串</li>
<li><strong>flags</strong>：标志位，用于控制正则表达式的匹配方式，如：是否区分大小写，多行匹配等等</li>
</ul>
<blockquote>
<p>search会扫描<strong>整个string</strong>查找匹配，如果找到则返回一个相应的匹配对象，否则返回None</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#! /usr/bin/env python</span></span><br><span class="line"><span class="comment"># -*- coding=utf-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">text = <span class="string">&#x27;python world&#x27;</span></span><br><span class="line">m = re.search(<span class="string">r&quot;\w+&quot;</span>, text)</span><br><span class="line"><span class="built_in">print</span>(m.group(<span class="number">0</span>)) <span class="keyword">if</span> m <span class="keyword">else</span> <span class="built_in">print</span>(<span class="string">&#x27;not match&#x27;</span>)</span><br><span class="line"></span><br><span class="line">text = <span class="string">&#x27;#python world&#x27;</span></span><br><span class="line">m = re.search(<span class="string">r&quot;\w+&quot;</span>, text)</span><br><span class="line"><span class="built_in">print</span>(m.group(<span class="number">0</span>)) <span class="keyword">if</span> m <span class="keyword">else</span> <span class="built_in">print</span>(<span class="string">&#x27;not match&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">output: python</span><br><span class="line">output: python</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># re.search()函数</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># -*- coding: utf-8 -*</span></span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line">str1 = <span class="string">&#x27;333STR1666STR299&#x27;</span></span><br><span class="line">pattern_s = <span class="string">r&#x27;([A-Z]+(\d))&#x27;</span></span><br><span class="line">match_r = re.search(pattern_s, str1)</span><br><span class="line"><span class="comment"># match_r[0]是regex所代表的整个字符串</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;match_r.group(0): <span class="subst">&#123;match_r.group(<span class="number">0</span>)&#125;</span>&#x27;</span>)  <span class="comment"># match_r.group()</span></span><br><span class="line"><span class="comment"># match_r[1]是第一个()中的内容</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;match_r.group(1): <span class="subst">&#123;match_r.group(<span class="number">1</span>)&#125;</span>&#x27;</span>)</span><br><span class="line"><span class="comment"># match_r[2]是第二对()中的内容</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;match_r.group(2): <span class="subst">&#123;match_r.group(<span class="number">2</span>)&#125;</span>&#x27;</span>)</span><br><span class="line"><span class="comment"># 所有group组成的一个元组</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;match_r.groups(): <span class="subst">&#123;match_r.groups()&#125;</span>&#x27;</span>)</span><br><span class="line"></span><br><span class="line">match_r.group(<span class="number">0</span>): STR1</span><br><span class="line">match_r.group(<span class="number">1</span>): STR1</span><br><span class="line">match_r.group(<span class="number">2</span>): <span class="number">1</span></span><br><span class="line">match_r.groups(): (<span class="string">&#x27;STR1&#x27;</span>, <span class="string">&#x27;1&#x27;</span>)</span><br></pre></td></tr></table></figure>
<h2 id="检索"><a href="#检索" class="headerlink" title="检索"></a>检索</h2><h3 id="findall"><a href="#findall" class="headerlink" title="findall"></a>findall</h3><blockquote>
<p>re.findall(pattern, string[, flags])</p>
</blockquote>
<p>返回string中所有与pattern相匹配的<strong>全部字串</strong>，返回形式为<strong>数组</strong></p>
<p><strong>参数说明</strong></p>
<ul>
<li><strong>string</strong>: 待匹配的字符串</li>
<li><strong>pos</strong>: 可选参数，指定字符串的起始位置，默认为 0</li>
<li><strong>endpos</strong>: 可选参数，指定字符串的结束位置，默认为字符串的长度</li>
</ul>
<blockquote>
<p>findall返回所有匹配的指定模式的文本子串到列表中，一个元素一个匹配串</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># re.findall()函数</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># -*- coding: utf-8 -*</span></span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line">str1 = <span class="string">&#x27;333STR1666STR299&#x27;</span></span><br><span class="line">pattern_s = <span class="string">r&#x27;([A-Z]+(\d))&#x27;</span></span><br><span class="line">match_r = re.findall(pattern_s, str1)</span><br><span class="line"><span class="keyword">for</span> m <span class="keyword">in</span> match_r:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&#x27;m[0], m[1]: <span class="subst">&#123;m[<span class="number">0</span>], m[<span class="number">1</span>]&#125;</span>&#x27;</span>)</span><br><span class="line">    </span><br><span class="line">m[<span class="number">0</span>], m[<span class="number">1</span>]: (<span class="string">&#x27;STR1&#x27;</span>, <span class="string">&#x27;1&#x27;</span>)</span><br><span class="line">m[<span class="number">0</span>], m[<span class="number">1</span>]: (<span class="string">&#x27;STR2&#x27;</span>, <span class="string">&#x27;2&#x27;</span>)</span><br></pre></td></tr></table></figure>
<h3 id="finditer"><a href="#finditer" class="headerlink" title="finditer"></a>finditer</h3><blockquote>
<p>re.finditer(pattern, string[, flags])</p>
</blockquote>
<p>返回string中所有与pattern相匹配的<strong>全部字串</strong>，返回形式为<strong>迭代器</strong></p>
<p><strong>参数说明</strong></p>
<ul>
<li><strong>pattern</strong>：匹配的正则表达式</li>
<li><strong>string</strong>：要匹配的字符串。</li>
<li><strong>flags</strong>：标志位，用于控制正则表达式的匹配方式，如：是否区分大小写，多行匹配等等。参见：正则表达式修饰符 - 可选标志</li>
</ul>
<blockquote>
<p>finditer函数跟findall函数类似，但返回的是一个迭代器</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># re.finditer()函数</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># -*- coding: utf-8 -*</span></span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line">str1 = <span class="string">&#x27;333STR1666STR299&#x27;</span></span><br><span class="line">pattern_s = <span class="string">r&#x27;([A-Z]+(\d))&#x27;</span></span><br><span class="line">match_r = re.finditer(pattern_s, str1)</span><br><span class="line"><span class="keyword">for</span> m <span class="keyword">in</span> match_r:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&#x27;m.group(0), m.group(1), m.group(2): <span class="subst">&#123;m.group(<span class="number">0</span>), m.group(<span class="number">1</span>), m.group(<span class="number">2</span>)&#125;</span>&#x27;</span>)  <span class="comment"># 字符串</span></span><br><span class="line">    </span><br><span class="line">m.group(<span class="number">0</span>), m.group(<span class="number">1</span>), m.group(<span class="number">2</span>): (<span class="string">&#x27;STR1&#x27;</span>, <span class="string">&#x27;STR1&#x27;</span>, <span class="string">&#x27;1&#x27;</span>)</span><br><span class="line">m.group(<span class="number">0</span>), m.group(<span class="number">1</span>), m.group(<span class="number">2</span>): (<span class="string">&#x27;STR2&#x27;</span>, <span class="string">&#x27;STR2&#x27;</span>, <span class="string">&#x27;2&#x27;</span>)</span><br></pre></td></tr></table></figure>
<h2 id="替换和分割"><a href="#替换和分割" class="headerlink" title="替换和分割"></a>替换和分割</h2><h3 id="sub替换"><a href="#sub替换" class="headerlink" title="sub替换"></a>sub替换</h3><blockquote>
<p>re.sub(pattern, repl, string, count=0, flags=0)</p>
</blockquote>
<ul>
<li>将字符串中匹配正则表达式的部分替换为其他值</li>
<li>Return the string obtained by replacing the leftmost non-overlapping occurrences of the pattern in string by the replacement repl.</li>
<li>repl can be either a string or a callable; if a string, backslash escapes in it are processed. If it is a callable, it’s passed the Match object and must return a replacement string to be used.</li>
</ul>
<p><strong>参数说明</strong></p>
<ul>
<li><strong>pattern</strong>: 正则中的模式字符串。</li>
<li><strong>repl</strong>: 替换的字符串，也可为一个函数。</li>
<li><strong>string</strong>: 要被查找替换的原始字符串。</li>
<li><strong>count</strong>: 模式匹配后替换的最大次数，默认 0 表示替换所有的匹配。</li>
</ul>
<blockquote>
<font color=6495ED size=4>代码</font>

</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"># -*- coding: utf-8 -*</span><br><span class="line">import re</span><br><span class="line">def add_one(match):</span><br><span class="line">    val = match.group()</span><br><span class="line">    num = int(val) + 1</span><br><span class="line">    return str(num)</span><br><span class="line">str2 = &#x27;imooc videonum=200&#x27;</span><br><span class="line">reSub_1 = re.sub(r&#x27;\d+&#x27;, add_one, str2)</span><br><span class="line">print(f&quot;re.sub(r&#x27;\d+&#x27;, add_one, str2): &#123;reSub_1&#125;&quot;)</span><br><span class="line">reSub_2 = re.sub(r&#x27;\d+&#x27;, &#x27;203&#x27;, str2)</span><br><span class="line">print(f&quot;re.sub(r&#x27;\d+&#x27;, &#x27;203&#x27;, str2): &#123;reSub_2&#125;&quot;)</span><br><span class="line"></span><br><span class="line">sample_text = &#x27;2020-05-20 10:59:23 hello world 2020-05-21 10:59:24 hello kitty&#x27;</span><br><span class="line">sample_pattern = r&#x27;(?P&lt;year&gt;\d&#123;4&#125;)-(?P&lt;month&gt;\d&#123;2&#125;)-(?P&lt;day&gt;\d&#123;2&#125;)&#x27;</span><br><span class="line">sample_repl = r&#x27;\g&lt;month&gt;/\g&lt;day&gt;/\g&lt;year&gt;&#x27;</span><br><span class="line">print(re.sub(sample_pattern, sample_repl, sample_text))</span><br></pre></td></tr></table></figure>
<blockquote>
<font color=B452CD size=4>输出</font>

</blockquote>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">re.sub(r&#x27;\d+&#x27;, add_one, str2): imooc videonum=<span class="number">201</span></span><br><span class="line">re.sub(r&#x27;\d+&#x27;, &#x27;<span class="number">203</span>&#x27;, str2): imooc videonum=<span class="number">203</span></span><br><span class="line"><span class="number">05</span>/<span class="number">20</span>/<span class="number">2020</span> <span class="number">10</span>:<span class="number">59</span>:<span class="number">23</span> hello world <span class="number">05</span>/<span class="number">21</span>/<span class="number">2020</span> <span class="number">10</span>:<span class="number">59</span>:<span class="number">24</span> hello kitty</span><br></pre></td></tr></table></figure>
<blockquote>
<p>高级用法</p>
<p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://cloud.tencent.com/developer/article/1627903">一日一技：如何正确使用 re.sub 的第二个参数</a></p>
</blockquote>
<p><code>re.sub</code>第二个参数可以是函数</p>
<p>设想有一个字符串<code>abc18123456794xyz123</code>，这个字符串中有两段数字，并且长短是不一样的</p>
<p>第一个数字是11位的手机号。我想把字符串替换为：`abc[隐藏手机号]xyz<em>*</em></p>
<p>不是手机号的数字，每一位数字逐位替换为星号</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test</span>(<span class="params">repl</span>):</span><br><span class="line"> <span class="keyword">if</span> <span class="built_in">len</span>(repl.group(<span class="number">0</span>)) == <span class="number">11</span>:</span><br><span class="line">     <span class="keyword">return</span> <span class="string">&#x27;[隐藏手机号]&#x27;</span></span><br><span class="line"> <span class="keyword">else</span>:</span><br><span class="line">     <span class="keyword">return</span> <span class="string">&#x27;*&#x27;</span> * <span class="built_in">len</span>(repl.group(<span class="number">0</span>))</span><br><span class="line"></span><br><span class="line">a = <span class="string">&#x27;abc18123456794xyz123&#x27;</span></span><br><span class="line">b = re.sub(<span class="string">&#x27;\d+&#x27;</span>, test, a)</span><br><span class="line"><span class="built_in">print</span>(b)</span><br></pre></td></tr></table></figure>
<h3 id="subn替换"><a href="#subn替换" class="headerlink" title="subn替换"></a>subn替换</h3><blockquote>
<p>subn(pattern, repl, string, count=0, flags=0)</p>
</blockquote>
<p>作用与函数 sub 一样， 唯一不同之处在于返回值为一个元组，第一个值为替换后的字符串，第二个值为发生替换的次数</p>
<h3 id="split分割"><a href="#split分割" class="headerlink" title="split分割"></a>split分割</h3><blockquote>
<p>re.split(pattern, string, maxsplit=0, flags=0)</p>
</blockquote>
<ul>
<li>根据匹配分割字符串，返回分割字符串组成的列表</li>
<li>Split the source string by the occurrences of the pattern, returning a list containing the resulting substrings.</li>
<li>If capturing parentheses are used in pattern, then the text of all groups in the pattern are also returned as part of the resulting list. If maxsplit is nonzero, at most maxsplit splits occur, and the remainder of the string is returned as the final element of the list.</li>
</ul>
<p><strong>参数说明</strong></p>
<ul>
<li><strong>pattern</strong>：匹配的正则表达式</li>
<li><strong>string</strong>：要匹配的字符串。</li>
<li><strong>maxsplit</strong>：分隔次数，maxsplit=1 分隔一次，默认为 0，不限制次数。</li>
<li><strong>flags</strong>：标志位，用于控制正则表达式的匹配方式，如：是否区分大小写，多行匹配等等。参见：正则表达式修饰符 - 可选标志</li>
</ul>
<blockquote>
<font color=6495ED size=4>代码</font>

</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*</span></span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line">str3 = <span class="string">&#x27;imooc:C C++ Java Python,c#&#x27;</span></span><br><span class="line">resub_3 = re.split(<span class="string">r&#x27;:| |,&#x27;</span>,str3)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;re.split(r&#x27;:| |,&#x27;,str3):<span class="subst">&#123;resub_3&#125;</span>&quot;</span>)</span><br></pre></td></tr></table></figure>
<blockquote>
<font color=B452CD size=4>输出</font>

</blockquote>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">re.split(r&#x27;:| |,&#x27;,str3):[&#x27;imooc&#x27;, &#x27;C&#x27;, &#x27;C++&#x27;, &#x27;Java&#x27;, &#x27;Python&#x27;, &#x27;c#&#x27;]</span><br></pre></td></tr></table></figure>
<h2 id="正则缓存"><a href="#正则缓存" class="headerlink" title="正则缓存"></a>正则缓存</h2><p>当你在程序中使用 re 模块，无论是先使用 compile 还是直接使用比如 findall 来使用正则表达式操作文本</p>
<p>re 模块都会将正则表达式先编译一下， 并且会将编译过后的正则表达式放到缓存中</p>
<p>这样下次使用同样的正则表达式的时候就不需要再次编译， 因为编译其实是很费时的，这样可以提升效率</p>
<p>而默认缓存的正则表达式的个数是 100，当你需要频繁使用少量正则表达式的时候，缓存可以提升效率</p>
<p>而使用的正则表达式过多时，缓存带来的优势就不明显了</p>
<p>这个<strong>re.purge()</strong>函数的作用是清除缓存中的正则表达式，可能在你需要<strong>优化占用内存</strong>的时候会用到</p>
<blockquote>
<p>爬虫例子</p>
</blockquote>
<font color=6495ED size=4>代码</font>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*</span></span><br><span class="line"><span class="keyword">import</span> urllib.request</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line">url = <span class="string">r&#x27;https://www.imooc.com/course/list?c=ai&#x27;</span></span><br><span class="line">res = urllib.request.urlopen(url)</span><br><span class="line">html = res.read().decode(<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">listurl = re.findall(<span class="string">r&#x27;src=&quot;//img\d.+?jpg&quot;&#x27;</span>, html)</span><br><span class="line">lurl = [<span class="string">&#x27;http:%s&#x27;</span> % x[<span class="number">5</span>:-<span class="number">1</span>] <span class="keyword">for</span> x <span class="keyword">in</span> listurl]</span><br><span class="line"><span class="built_in">print</span>(lurl)</span><br><span class="line"></span><br><span class="line">basepath = <span class="string">&#x27;./res&#x27;</span></span><br><span class="line"><span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(basepath):</span><br><span class="line">    os.makedirs(basepath)</span><br><span class="line">imgspath = os.path.join(basepath, <span class="string">&#x27;re_op&#x27;</span>)</span><br><span class="line"><span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(imgspath):</span><br><span class="line">    os.mkdir(imgspath)</span><br><span class="line"><span class="keyword">for</span> ii, uu <span class="keyword">in</span> <span class="built_in">enumerate</span>(lurl):</span><br><span class="line">    savepath = os.path.join(imgspath, <span class="string">&#x27;%d.jpg&#x27;</span> % (ii))</span><br><span class="line">    res = urllib.request.urlretrieve(uu, savepath)</span><br></pre></td></tr></table></figure>
<font color=B452CD size=4>输出</font>

<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[&#x27;http://img4.mukewang.com/<span class="number">5</span>bd8157a0001a7a506000336-<span class="number">240</span>-<span class="number">135</span>.jpg&#x27;, &#x27;http://img3.mukewang.com/<span class="number">5</span>bc6e6b80001434f06000338-<span class="number">240</span>-<span class="number">135</span>.jpg&#x27;, &#x27;http://img2.mukewang.com/<span class="number">5</span>ba2386600013d3705980337-<span class="number">240</span>-<span class="number">135</span>.jpg&#x27;, &#x27;http://img3.mukewang.com/<span class="number">5</span>b9105800001288905400300-<span class="number">240</span>-<span class="number">135</span>.jpg&#x27;, &#x27;http://img4.mukewang.com/<span class="number">5</span>b7f737a0001cfb706000336-<span class="number">240</span>-<span class="number">135</span>.jpg&#x27;, &#x27;http://img4.mukewang.com/<span class="number">5</span>abc6159000142f706000338-<span class="number">240</span>-<span class="number">135</span>.jpg&#x27;, &#x27;http://img1.mukewang.com/<span class="number">5</span>a40c6370001d13c06000338-<span class="number">240</span>-<span class="number">135</span>.jpg&#x27;]</span><br></pre></td></tr></table></figure>
<h1 id="进阶用法"><a href="#进阶用法" class="headerlink" title="进阶用法"></a>进阶用法</h1><h2 id="非贪婪匹配"><a href="#非贪婪匹配" class="headerlink" title="非贪婪匹配"></a>非贪婪匹配</h2><blockquote>
<p>匹配模式</p>
</blockquote>
<ul>
<li><p><strong>贪婪匹配：</strong>贪婪匹配在匹配字符串时总是尝试匹配<strong>尽可能多</strong>的字符</p>
</li>
<li><p><strong>非贪婪匹配：</strong>与贪婪匹配相反，非贪婪匹配在匹配字符串时总是尝试匹配<strong>尽可能少</strong>的字符</p>
</li>
</ul>
<p>Python里数量词默认是<strong>贪婪模式</strong>的，使用*? / +? / ??可使贪婪模式变成非贪婪模式</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*</span></span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">str1 = <span class="string">&#x27;9abc&#x27;</span>  <span class="comment"># 需要查找的原始字符串</span></span><br><span class="line">pattern_s = <span class="string">r&#x27;[0-9][a-z]*?&#x27;</span>  <span class="comment"># 定义正则表达式</span></span><br><span class="line">pattern_r = re.<span class="built_in">compile</span>(pattern_s)  <span class="comment"># 编译正则表达式</span></span><br><span class="line">match_r = pattern_r.<span class="keyword">match</span>(str1)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;match_r.group(): <span class="subst">&#123;match_r.group()&#125;</span>&#x27;</span>)</span><br><span class="line">pattern_s = <span class="string">r&#x27;[0-9][a-z]*&#x27;</span>  <span class="comment"># 定义正则表达式</span></span><br><span class="line">pattern_r = re.<span class="built_in">compile</span>(pattern_s)  <span class="comment"># 编译正则表达式</span></span><br><span class="line">match_r = pattern_r.<span class="keyword">match</span>(str1)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;match_r.group(): <span class="subst">&#123;match_r.group()&#125;</span>&#x27;</span>)</span><br><span class="line"></span><br><span class="line">pattern_s = <span class="string">r&#x27;[0-9][a-z]+?&#x27;</span>  <span class="comment"># 定义正则表达式</span></span><br><span class="line">pattern_r = re.<span class="built_in">compile</span>(pattern_s)  <span class="comment"># 编译正则表达式</span></span><br><span class="line">match_r = pattern_r.<span class="keyword">match</span>(str1)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;match_r.group(): <span class="subst">&#123;match_r.group()&#125;</span>&#x27;</span>)</span><br><span class="line">pattern_s = <span class="string">r&#x27;[0-9][a-z]+&#x27;</span>  <span class="comment"># 定义正则表达式</span></span><br><span class="line">pattern_r = re.<span class="built_in">compile</span>(pattern_s)  <span class="comment"># 编译正则表达式</span></span><br><span class="line">match_r = pattern_r.<span class="keyword">match</span>(str1)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;match_r.group(): <span class="subst">&#123;match_r.group()&#125;</span>&#x27;</span>)</span><br><span class="line"></span><br><span class="line">pattern_s = <span class="string">r&#x27;[0-9][a-z]??&#x27;</span>  <span class="comment"># 定义正则表达式</span></span><br><span class="line">pattern_r = re.<span class="built_in">compile</span>(pattern_s)  <span class="comment"># 编译正则表达式</span></span><br><span class="line">match_r = pattern_r.<span class="keyword">match</span>(str1)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;match_r.group(): <span class="subst">&#123;match_r.group()&#125;</span>&#x27;</span>)</span><br><span class="line">pattern_s = <span class="string">r&#x27;[0-9][a-z]?&#x27;</span>  <span class="comment"># 定义正则表达式</span></span><br><span class="line">pattern_r = re.<span class="built_in">compile</span>(pattern_s)  <span class="comment"># 编译正则表达式</span></span><br><span class="line">match_r = pattern_r.<span class="keyword">match</span>(str1)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;match_r.group(): <span class="subst">&#123;match_r.group()&#125;</span>&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">match_r.group(): <span class="number">9</span></span><br><span class="line">match_r.group(): 9abc</span><br><span class="line">match_r.group(): 9a</span><br><span class="line">match_r.group(): 9abc</span><br><span class="line">match_r.group(): <span class="number">9</span></span><br><span class="line">match_r.group(): 9a</span><br></pre></td></tr></table></figure>
<h2 id="分组匹配-捕获组"><a href="#分组匹配-捕获组" class="headerlink" title="分组匹配(捕获组)"></a>分组匹配(捕获组)</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://pic.hycbook.com/i/hexo/bk_resources/python/11.Regular_Expression_OP/正则表达式分组语法示例.webp" alt="正则表达式分组语法示例"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> regex <span class="keyword">as</span> re</span><br><span class="line"></span><br><span class="line">pat = re.<span class="built_in">compile</span>(<span class="string">r&quot;有(?P&lt;zj&gt;(许可证[件]?|执照))的?(?P&lt;xf_type&gt;(暂扣|吊销).&#123;0,4&#125;(?P=zj))&quot;</span>)</span><br><span class="line">doc = <span class="string">&quot;有许可证的吊销许可证，并给予严厉惩罚&quot;</span></span><br><span class="line">res = <span class="built_in">list</span>(re.finditer(pat, doc))</span><br><span class="line">res[<span class="number">0</span>].groupdict()</span><br><span class="line"></span><br><span class="line">Out[<span class="number">16</span>]: &#123;<span class="string">&#x27;zj&#x27;</span>: <span class="string">&#x27;许可证&#x27;</span>, <span class="string">&#x27;xf_type&#x27;</span>: <span class="string">&#x27;吊销许可证&#x27;</span>&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 分组匹配之 \&lt;number&gt;</span></span><br><span class="line"><span class="comment"># -*- coding: utf-8 -*</span></span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">str1 = <span class="string">&#x27;&lt;book&gt;python&lt;/book&gt;&#x27;</span></span><br><span class="line">pattern_s = <span class="string">r&#x27;&lt;([\w]+&gt;)[\w]+&lt;/\1&#x27;</span></span><br><span class="line"><span class="built_in">print</span>(re.<span class="keyword">match</span>(pattern_s, str1).group())</span><br><span class="line"></span><br><span class="line">&lt;book&gt;python&lt;/book&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 分组匹配之 别名 (?P&lt;name&gt;) 和 (?P=name)</span></span><br><span class="line"><span class="comment"># -*- coding: utf-8 -*</span></span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">str1 = <span class="string">&#x27;&lt;book&gt;python&lt;/book&gt;&#x27;</span></span><br><span class="line">pattern_s = <span class="string">r&#x27;&lt;(?P&lt;mark1&gt;[\w]+&gt;)[\w]+&lt;/(?P=mark1)&#x27;</span></span><br><span class="line"><span class="built_in">print</span>(re.<span class="keyword">match</span>(pattern_s, str1).group())</span><br><span class="line">Out[<span class="number">12</span>]: &lt;book&gt;python&lt;/book&gt;</span><br><span class="line"></span><br><span class="line">re.<span class="keyword">match</span>(pattern_s, str1).groupdict()</span><br><span class="line">Out[<span class="number">13</span>]: &#123;<span class="string">&#x27;mark1&#x27;</span>: <span class="string">&#x27;book&gt;&#x27;</span>&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 分组匹配之group()和groups()</span></span><br><span class="line">group() / group(<span class="number">0</span>): 母串中与模式pattern匹配的子串</span><br><span class="line">group(index): 第index个group匹配成功的子串</span><br><span class="line">groups(): 所有group组成的一个元组，与pattern中的()有关</span><br><span class="line"></span><br><span class="line"><span class="comment"># -*- coding: utf-8 -*</span></span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line">p = re.<span class="built_in">compile</span>(<span class="string">&#x27;\d-\d-\d&#x27;</span>)</span><br><span class="line">m = p.<span class="keyword">match</span>(<span class="string">&#x27;2-3-1&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;m.group(): <span class="subst">&#123;m.group()&#125;</span>&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;m.group(0): <span class="subst">&#123;m.group(<span class="number">0</span>)&#125;</span>&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;m.groups(): <span class="subst">&#123;m.groups()&#125;</span>&#x27;</span>)</span><br><span class="line"></span><br><span class="line">m.group(): <span class="number">2</span>-<span class="number">3</span>-<span class="number">1</span></span><br><span class="line">m.group(<span class="number">0</span>): <span class="number">2</span>-<span class="number">3</span>-<span class="number">1</span></span><br><span class="line">m.groups(): ()</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*</span></span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line">p = re.<span class="built_in">compile</span>(<span class="string">&#x27;(\d)-(\d)-(\d)&#x27;</span>)</span><br><span class="line">m = p.<span class="keyword">match</span>(<span class="string">&#x27;2-3-1d5-4-3&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;m.group(): <span class="subst">&#123;m.group()&#125;</span>&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;m.group(0): <span class="subst">&#123;m.group(<span class="number">0</span>)&#125;</span>&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;m.groups(): <span class="subst">&#123;m.groups()&#125;</span>&#x27;</span>)</span><br><span class="line"></span><br><span class="line">m.group(): <span class="number">2</span>-<span class="number">3</span>-<span class="number">1</span></span><br><span class="line">m.group(<span class="number">0</span>): <span class="number">2</span>-<span class="number">3</span>-<span class="number">1</span></span><br><span class="line">m.groups(): (<span class="string">&#x27;2&#x27;</span>, <span class="string">&#x27;3&#x27;</span>, <span class="string">&#x27;1&#x27;</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*</span></span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line">p = re.<span class="built_in">compile</span>(<span class="string">&#x27;(\d)-(\d)-(\d)&#x27;</span>)</span><br><span class="line">m = re.<span class="keyword">match</span>(p,<span class="string">&#x27;2-3-1d5-4-3&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;m.group(): <span class="subst">&#123;m.group()&#125;</span>&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;m.group(0): <span class="subst">&#123;m.group(<span class="number">0</span>)&#125;</span>&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;m.groups(): <span class="subst">&#123;m.groups()&#125;</span>&#x27;</span>)</span><br><span class="line"></span><br><span class="line">m.group(): <span class="number">2</span>-<span class="number">3</span>-<span class="number">1</span></span><br><span class="line">m.group(<span class="number">0</span>): <span class="number">2</span>-<span class="number">3</span>-<span class="number">1</span></span><br><span class="line">m.groups(): (<span class="string">&#x27;2&#x27;</span>, <span class="string">&#x27;3&#x27;</span>, <span class="string">&#x27;1&#x27;</span>)</span><br></pre></td></tr></table></figure>
<h2 id="转义匹配替代函数"><a href="#转义匹配替代函数" class="headerlink" title="转义匹配替代函数"></a>转义匹配替代函数</h2><p>使用python的过程中，你肯定对转义字符的使用苦恼过，因为有的时候我们需要使用一些特殊符号如”$ * . ^”等的原意</p>
<p>有时候需要被转义后的功能，并且转义字符地使用很繁琐，容易出错</p>
<blockquote>
<p>re.escape(pattern)</p>
</blockquote>
<ul>
<li>转义: 如果你需要操作的文本中含有正则的元字符，你在写正则的时候需要将元字符加上反斜扛 \ 去匹配自身</li>
<li>而当这样的字符很多时，写出来的正则表达式就看起来很乱而且写起来也挺麻烦的，这个时候你可以使用这个函数</li>
<li>可以对字符串中所有可能被解释为正则运算符的字符进行转义的应用函数</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*</span></span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line">str2 = <span class="string">&quot;.+\d123&quot;</span></span><br><span class="line">regex_str = re.escape(<span class="string">&quot;.+\d123&quot;</span>)</span><br><span class="line"><span class="comment"># 查看转义后的字符</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;regex_str: <span class="subst">&#123;regex_str&#125;</span>&#x27;</span>)</span><br><span class="line"><span class="comment"># 查看匹配到的结果</span></span><br><span class="line"><span class="keyword">for</span> g <span class="keyword">in</span> re.findall(regex_str, str2):</span><br><span class="line">    <span class="built_in">print</span>(g)</span><br><span class="line">    </span><br><span class="line">regex_str: \.\+\\d123</span><br><span class="line">.+\d123</span><br></pre></td></tr></table></figure>
<h2 id="re增强的包装"><a href="#re增强的包装" class="headerlink" title="re增强的包装"></a>re增强的包装</h2><p><strong>主要目的是</strong>，增强re的匹配能力，为match对象添加了<code>start: int=0</code>参数，start指定了当前字符串的起始位置，默认的起始位置是0</p>
<blockquote>
<p>导入库，regex是re的增强版，需要pip安装，它支持更强的正则，比如<strong>一个表达式中可以出现两个一样的捕获组名字</strong></p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> Iterable, <span class="type">List</span></span><br><span class="line"><span class="keyword">import</span> regex <span class="keyword">as</span> re</span><br></pre></td></tr></table></figure>
<blockquote>
<p>包装match对象为ReMatch类</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">ReMatch</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, <span class="keyword">match</span>, start: <span class="built_in">int</span> = <span class="number">0</span></span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        指定起始位置的Match类</span></span><br><span class="line"><span class="string">        :param match: re.Match对象</span></span><br><span class="line"><span class="string">        :param start:</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        self.<span class="keyword">match</span> = <span class="keyword">match</span></span><br><span class="line">        self.start_idx = start</span><br><span class="line"></span><br><span class="line"><span class="meta">    @property</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">endpos</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot; 本次搜索结束位置索引 &quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">return</span> self.<span class="keyword">match</span>.endpos + self.start_idx</span><br><span class="line"></span><br><span class="line"><span class="meta">    @property</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">lastgroup</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot; 本次搜索匹配到的最后一个分组的别名 &quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">return</span> self.<span class="keyword">match</span>.lastgroup</span><br><span class="line"></span><br><span class="line"><span class="meta">    @property</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">lastindex</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot; 本次搜索匹配到的最后一个分组的索引 &quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">return</span> self.<span class="keyword">match</span>.lastindex + self.start_idx <span class="keyword">if</span> <span class="built_in">type</span>(self.<span class="keyword">match</span>.lastindex) == <span class="built_in">int</span> <span class="keyword">else</span> self.<span class="keyword">match</span>.lastindex</span><br><span class="line"></span><br><span class="line"><span class="meta">    @property</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">pos</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot; 本次搜索开始位置索引 &quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">return</span> self.<span class="keyword">match</span>.pos + self.start_idx</span><br><span class="line"></span><br><span class="line"><span class="meta">    @property</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">re</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot; 本次搜索使用的SRE_Pattern对象 &quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">return</span> self.<span class="keyword">match</span>.re</span><br><span class="line"></span><br><span class="line"><span class="meta">    @property</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">regs</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot; 列表，元素为元组，包含本次搜索匹配到的所有分组的起止位置 &quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">tuple</span>([(s + self.start_idx, e + self.start_idx) <span class="keyword">for</span> s, e <span class="keyword">in</span> self.<span class="keyword">match</span>.regs])</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">end</span>(<span class="params">self, *args, **kwargs</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot; 返回指定分组的结束位置，默认返回正则表达式所匹配到的最后一个字符的索引 &quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">return</span> self.<span class="keyword">match</span>.end(*args, **kwargs) + self.start_idx</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">expand</span>(<span class="params">self, *args, **kwargs</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot; 根据模版返回相应的字符串，类似与 sub 函数里面的 repl， 可使用 \1 或者 \g 来选择分组 &quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">return</span> self.<span class="keyword">match</span>.expand(*args, **kwargs)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">group</span>(<span class="params">self, *args, **kwargs</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot; 根据提供的索引或名字返回响应分组的内容，默认返回 start() 到 end() 之间的字符串， 提供多个参数将返回一个元组 &quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">return</span> self.<span class="keyword">match</span>.group(*args, **kwargs)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">groupdict</span>(<span class="params">self, *args, **kwargs</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot; 返回一个包含所有匹配到的命名分组的字典，没有命名的分组不包含在内，key 为组名， value 为匹配到的内容，参数 default 为没有参与本次匹配的命名分组提供默认值 &quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">return</span> self.<span class="keyword">match</span>.groupdict(*args, **kwargs)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">_build_key_2_index</span>(<span class="params">self</span>):</span><br><span class="line">        groups = self.<span class="keyword">match</span>.groups()</span><br><span class="line">        group_2_index = []</span><br><span class="line">        <span class="keyword">for</span> idx, group <span class="keyword">in</span> <span class="built_in">enumerate</span>(groups, start=<span class="number">1</span>):</span><br><span class="line">            group_2_index.append((group, self.<span class="keyword">match</span>.start(idx)+self.start_idx, self.<span class="keyword">match</span>.end(idx)+self.start_idx))</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> group_2_index</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">groupdict_with_index</span>(<span class="params">self, *args, **kwargs</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot; 同groupdict, 但匹配结果包装为带索引的ContentWithIndex对象 &quot;&quot;&quot;</span></span><br><span class="line">        value = self.<span class="keyword">match</span>.groupdict(*args, **kwargs)</span><br><span class="line">        new_group_dict = <span class="built_in">dict</span>()</span><br><span class="line">        <span class="keyword">for</span> k, v <span class="keyword">in</span> value.items():</span><br><span class="line">            <span class="keyword">for</span> group, s, e <span class="keyword">in</span> self._build_key_2_index():</span><br><span class="line">                <span class="keyword">if</span> v == group:</span><br><span class="line">                    new_group_dict[k] = ContentWithIndex(content=v, start=s, end=e)</span><br><span class="line">        <span class="keyword">assert</span> <span class="built_in">len</span>(new_group_dict) == <span class="built_in">len</span>(value)</span><br><span class="line">        <span class="keyword">return</span> new_group_dict</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">groups</span>(<span class="params">self, *args, **kwargs</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot; 以元组形式返回每一个分组匹配到的字符串，包括没有参与匹配的分组，其值为 default &quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">return</span> self.<span class="keyword">match</span>.groups(*args, **kwargs)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">span</span>(<span class="params">self, *args, **kwargs</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot; 返回指定分组的起止位置组成的元组，默认返回由 start() 和 end() 组成的元组 &quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">tuple</span>([(s + self.start_idx, e + self.start_idx) <span class="keyword">for</span> s, e <span class="keyword">in</span> self.<span class="keyword">match</span>.span(*args, **kwargs)])</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">start</span>(<span class="params">self, *args, **kwargs</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot; 返回指定分组的开始位置，默认返回正则表达式所匹配到的第一个字符的索引 &quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">return</span> self.<span class="keyword">match</span>.start(*args, **kwargs) + self.start_idx</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">start_and_end</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> self.start(), self.end()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__str__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> self.__repr__()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__repr__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="string">f&quot;&lt;regex.Match object; span=(<span class="subst">&#123;self.start()&#125;</span>, <span class="subst">&#123;self.end()&#125;</span>), match=&#x27;<span class="subst">&#123;self.<span class="keyword">match</span>.group()&#125;</span>&#x27;&gt;&quot;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>匹配结果类ContentWithIndex：主要是统一像split这样的方法返回的结果</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">ContentWithIndex</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, content: <span class="built_in">str</span>, start: <span class="built_in">int</span>, end: <span class="built_in">int</span></span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        带索引的切分结果</span></span><br><span class="line"><span class="string">        :param content: 切分结果</span></span><br><span class="line"><span class="string">        :param start: 起始位置</span></span><br><span class="line"><span class="string">        :param end: 结束位置</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        self.content = content</span><br><span class="line">        self.start = start</span><br><span class="line">        self.end = end</span><br><span class="line"></span><br><span class="line"><span class="meta">    @property</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">pos</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> self.start</span><br><span class="line"></span><br><span class="line"><span class="meta">    @property</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">posend</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> self.end</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">start_and_end</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> self.start, self.end</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__str__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> self.__repr__()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__repr__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="string">f&quot;<span class="subst">&#123;self.content&#125;</span> (<span class="subst">&#123;self.start&#125;</span>, <span class="subst">&#123;self.end&#125;</span>)&quot;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>re包装的工具类ReUtils</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">ReUtils</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot; 正则匹配的工具类 &quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="meta">    @staticmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">match</span>(<span class="params">pattern, string, flags=<span class="number">0</span>, start: <span class="built_in">int</span> = <span class="number">0</span></span>):</span><br><span class="line">        <span class="keyword">match</span> = re.<span class="keyword">match</span>(pattern=pattern, string=string, flags=flags)</span><br><span class="line">        <span class="keyword">return</span> ReMatch(<span class="keyword">match</span>=<span class="keyword">match</span>, start=start)</span><br><span class="line"></span><br><span class="line"><span class="meta">    @staticmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">fullmatch</span>(<span class="params">pattern, string, flags=<span class="number">0</span>, start: <span class="built_in">int</span> = <span class="number">0</span></span>):</span><br><span class="line">        <span class="keyword">match</span> = re.fullmatch(pattern=pattern, string=string, flags=flags)</span><br><span class="line">        <span class="keyword">return</span> ReMatch(<span class="keyword">match</span>=<span class="keyword">match</span>, start=start)</span><br><span class="line"></span><br><span class="line"><span class="meta">    @staticmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">search</span>(<span class="params">pattern, string, flags=<span class="number">0</span>, start: <span class="built_in">int</span> = <span class="number">0</span></span>):</span><br><span class="line">        <span class="keyword">match</span> = re.search(pattern=pattern, string=string, flags=flags)</span><br><span class="line">        <span class="keyword">return</span> ReMatch(<span class="keyword">match</span>=<span class="keyword">match</span>, start=start)</span><br><span class="line"></span><br><span class="line"><span class="meta">    @staticmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">sub</span>(<span class="params">pattern, repl, string, count=<span class="number">0</span>, flags=<span class="number">0</span></span>):</span><br><span class="line">        <span class="keyword">return</span> re.sub(pattern=pattern, repl=repl, string=string, count=count, flags=flags)</span><br><span class="line"></span><br><span class="line"><span class="meta">    @staticmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">subn</span>(<span class="params">pattern, repl, string, count=<span class="number">0</span>, flags=<span class="number">0</span></span>):</span><br><span class="line">        <span class="keyword">return</span> re.subn(pattern=pattern, repl=repl, string=string, count=count, flags=flags)</span><br><span class="line"></span><br><span class="line"><span class="meta">    @staticmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">split</span>(<span class="params">pattern, string, maxsplit=<span class="number">0</span>, flags=<span class="number">0</span></span>):</span><br><span class="line">        <span class="keyword">return</span> re.split(pattern=pattern, string=string, maxsplit=maxsplit, flags=flags)</span><br><span class="line"></span><br><span class="line"><span class="meta">    @staticmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">split_with_index</span>(<span class="params">pattern, string, maxsplit: <span class="built_in">int</span> = <span class="number">0</span>, flags=<span class="number">0</span>, start: <span class="built_in">int</span> = <span class="number">0</span></span>) -&gt; <span class="type">List</span>[ContentWithIndex]:</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        split带内容索引</span></span><br><span class="line"><span class="string">        :param pattern:</span></span><br><span class="line"><span class="string">        :param string:</span></span><br><span class="line"><span class="string">        :param maxsplit:</span></span><br><span class="line"><span class="string">        :param flags:</span></span><br><span class="line"><span class="string">        :param start:</span></span><br><span class="line"><span class="string">        :return:</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        matches = ReUtils.finditer(pattern, string, flags, start=start)  <span class="comment"># 使用re.finditer()获取匹配的位置和内容</span></span><br><span class="line">        content_with_indexs = []</span><br><span class="line">        start_idx = start</span><br><span class="line">        <span class="keyword">for</span> <span class="keyword">match</span> <span class="keyword">in</span> matches:</span><br><span class="line">            end_idx = <span class="keyword">match</span>.start()  <span class="comment"># 当前分隔符的起始位置</span></span><br><span class="line">            content_with_index = ContentWithIndex(content=string[start_idx - start:end_idx - start], start=start_idx,</span><br><span class="line">                                                  end=end_idx)</span><br><span class="line">            content_with_indexs.append(content_with_index)  <span class="comment"># 添加分隔符之前的文本及其位置信息</span></span><br><span class="line">            start_idx = <span class="keyword">match</span>.end()  <span class="comment"># 更新下一个分隔符的起始位置</span></span><br><span class="line">            <span class="keyword">if</span> maxsplit <span class="keyword">and</span> <span class="built_in">len</span>(content_with_indexs) &gt;= maxsplit:</span><br><span class="line">                content_with_index = ContentWithIndex(content=string[start_idx - start:], start=start_idx,</span><br><span class="line">                                                      end=<span class="built_in">len</span>(string))</span><br><span class="line">                content_with_indexs.append(content_with_index)  <span class="comment"># 添加分隔符之前的文本及其位置信息</span></span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="comment"># 添加最后一个分隔符之后的文本</span></span><br><span class="line">            content_with_index = ContentWithIndex(content=string[start_idx - start:], start=start_idx,</span><br><span class="line">                                                  end=<span class="built_in">len</span>(string) + start)</span><br><span class="line">            content_with_indexs.append(content_with_index)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># if maxsplit and len(content_with_indexs) &lt; maxsplit + 1 and start_idx &lt; len(string):</span></span><br><span class="line">        <span class="comment">#     # 添加最后一个分隔符之后的文本</span></span><br><span class="line">        <span class="comment">#     content_with_index = ContentWithIndex(content=string[start_idx-start:], start=start_idx, end=len(string))</span></span><br><span class="line">        <span class="comment">#     content_with_indexs.append(content_with_index)</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> content_with_indexs</span><br><span class="line"></span><br><span class="line"><span class="meta">    @staticmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">findall</span>(<span class="params">pattern, string, flags=<span class="number">0</span></span>):</span><br><span class="line">        <span class="keyword">return</span> re.findall(pattern=pattern, string=string, flags=flags)</span><br><span class="line"></span><br><span class="line"><span class="meta">    @staticmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">finditer</span>(<span class="params">pattern, string, flags=<span class="number">0</span>, start: <span class="built_in">int</span> = <span class="number">0</span></span>) -&gt; Iterable[ReMatch]:</span><br><span class="line">        <span class="keyword">for</span> <span class="keyword">match</span> <span class="keyword">in</span> re.finditer(pattern=pattern, string=string, flags=flags):</span><br><span class="line">            <span class="keyword">yield</span> ReMatch(<span class="keyword">match</span>=<span class="keyword">match</span>, start=start)</span><br></pre></td></tr></table></figure>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/narutohyc">narutohyc</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://study.hycbook.com/article/13105.html">https://study.hycbook.com/article/13105.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow noreferrer" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://study.hycbook.com" target="_blank">兼一书虫</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/python/">python</a><a class="post-meta__tags" href="/tags/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/">正则表达式</a><a class="post-meta__tags" href="/tags/re/">re</a><a class="post-meta__tags" href="/tags/%E5%8C%B9%E9%85%8D/">匹配</a><a class="post-meta__tags" href="/tags/%E6%A3%80%E7%B4%A2/">检索</a><a class="post-meta__tags" href="/tags/%E6%9B%BF%E6%8D%A2%E5%92%8C%E5%88%86%E5%89%B2/">替换和分割</a><a class="post-meta__tags" href="/tags/%E9%9D%9E%E8%B4%AA%E5%A9%AA%E5%8C%B9%E9%85%8D/">非贪婪匹配</a><a class="post-meta__tags" href="/tags/%E5%88%86%E7%BB%84%E5%8C%B9%E9%85%8D/">分组匹配</a></div><div class="post_share"><div class="social-share" data-image="https://pic.hycbook.com/i//hexo/post_cover/蕾姆10.webp" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><link rel="stylesheet" href="/" media="defer" onload="this.media='all'"/><div class="post-reward"><button class="tip-button reward-button"><span class="tip-button__text">打赏</span><div class="coin-wrapper"><div class="coin"><div class="coin__middle"></div><div class="coin__back"></div><div class="coin__front"></div></div></div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="https://pic.hycbook.com/i//hexo/qr_codes/hyc_wechat.webp" rel="external nofollow noreferrer" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://pic.hycbook.com/i//hexo/qr_codes/hyc_wechat.webp" alt="wechat"/></a><div class="post-qr-code-desc">wechat</div></li><li class="reward-item"><a href="https://pic.hycbook.com/i//hexo/qr_codes/hyc_alipay.webp" rel="external nofollow noreferrer" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://pic.hycbook.com/i//hexo/qr_codes/hyc_alipay.webp" alt="alipay"/></a><div class="post-qr-code-desc">alipay</div></li></ul></div></button></div><audio id="coinAudio" src="https://s1.vika.cn/space/2022/10/29/6db0ad2bccf949f09054b3b206dcc66f?attname=马里奥游戏投币叮当.mp3"></audio><script defer="defer" src="/"></script><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/article/45122.html"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://pic.hycbook.com/i//hexo/post_cover/蕾姆4.webp" onerror="onerror=null;src='https://pic.hycbook.com/i/hexo/config_imgs/404.svg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">python装饰器</div></div></a></div><div class="next-post pull-right"><a href="/article/59006.html"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://pic.hycbook.com/i/hexo/post_cover/蕾姆9.webp" onerror="onerror=null;src='https://pic.hycbook.com/i/hexo/config_imgs/404.svg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">数据库相关操作</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/article/4071.html" title="枚举类Enum"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://pic.hycbook.com/i//hexo/post_cover/蕾姆12.webp" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-09-10</div><div class="title">枚举类Enum</div></div></a></div><div><a href="/article/62278.html" title="pandas小记"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://pic.hycbook.com/i/hexo/post_cover/蕾姆2.webp" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-09-10</div><div class="title">pandas小记</div></div></a></div><div><a href="/article/30791.html" title="numpy小记"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://pic.hycbook.com/i/hexo/post_cover/蕾姆3.webp" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-09-10</div><div class="title">numpy小记</div></div></a></div><div><a href="/article/27292.html" title="python_pipe包管道包学习"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://pic.hycbook.com/i/hexo/post_cover/蕾姆4.webp" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-09-10</div><div class="title">python_pipe包管道包学习</div></div></a></div><div><a href="/article/65108.html" title="Python增强提案PEP"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://pic.hycbook.com/i/hexo/post_cover/蕾姆5.webp" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-09-10</div><div class="title">Python增强提案PEP</div></div></a></div><div><a href="/article/30423.html" title="python多线程"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://pic.hycbook.com/i//hexo/post_cover/蕾姆1.webp" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-09-10</div><div class="title">python多线程</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div><div id="comment-switch"><span class="first-comment">Twikoo</span><span class="switch-btn"></span><span class="second-comment">Valine</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div><div><div class="vcomment" id="vcomment"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content is-expand"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E6%A6%82%E5%BF%B5"><span class="toc-number">1.</span> <span class="toc-text">正则表达式概念</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%AD%A3%E5%88%99%E5%85%83%E5%AD%97%E7%AC%A6"><span class="toc-number">2.</span> <span class="toc-text">正则元字符</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%86%85%E5%AE%B9%E5%8C%B9%E9%85%8D"><span class="toc-number">2.1.</span> <span class="toc-text">内容匹配</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%AA%E6%95%B0%E5%8C%B9%E9%85%8D"><span class="toc-number">2.2.</span> <span class="toc-text">个数匹配</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%8D%E7%BD%AE%E5%8C%B9%E9%85%8D"><span class="toc-number">2.3.</span> <span class="toc-text">位置匹配</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%86%E7%BB%84%E5%8C%B9%E9%85%8D"><span class="toc-number">2.4.</span> <span class="toc-text">分组匹配</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BD%AC%E4%B9%89%E5%8C%B9%E9%85%8D"><span class="toc-number">2.5.</span> <span class="toc-text">转义匹配</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="toc-number">3.</span> <span class="toc-text">基本使用</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%A2%84%E7%BC%96%E8%AF%91"><span class="toc-number">3.1.</span> <span class="toc-text">预编译</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8C%B9%E9%85%8D%E6%A8%A1%E5%BC%8F"><span class="toc-number">3.2.</span> <span class="toc-text">匹配模式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BF%BD%E7%95%A5%E5%A4%A7%E5%B0%8F%E5%86%99re-I"><span class="toc-number">3.2.1.</span> <span class="toc-text">忽略大小写re.I</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E9%9B%86%E6%9C%AC%E5%9C%B0%E5%8C%96re-L"><span class="toc-number">3.2.2.</span> <span class="toc-text">字符集本地化re.L</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%9A%E8%A1%8C%E6%A8%A1%E5%BC%8Fre-M"><span class="toc-number">3.2.3.</span> <span class="toc-text">多行模式re.M</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%89%80%E6%9C%89%E5%AD%97%E7%AC%A6re-S"><span class="toc-number">3.2.4.</span> <span class="toc-text">所有字符re.S</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%86%97%E4%BD%99%E6%A8%A1%E5%BC%8Fre-X"><span class="toc-number">3.2.5.</span> <span class="toc-text">冗余模式re.X</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#UNICODE%E8%A7%A3%E6%9E%90re-U"><span class="toc-number">3.2.6.</span> <span class="toc-text">UNICODE解析re.U</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#re-Match%E7%B1%BB"><span class="toc-number">3.3.</span> <span class="toc-text">re.Match类</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8C%B9%E9%85%8D"><span class="toc-number">3.4.</span> <span class="toc-text">匹配</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#match"><span class="toc-number">3.4.1.</span> <span class="toc-text">match</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#search"><span class="toc-number">3.4.2.</span> <span class="toc-text">search</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A3%80%E7%B4%A2"><span class="toc-number">3.5.</span> <span class="toc-text">检索</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#findall"><span class="toc-number">3.5.1.</span> <span class="toc-text">findall</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#finditer"><span class="toc-number">3.5.2.</span> <span class="toc-text">finditer</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9B%BF%E6%8D%A2%E5%92%8C%E5%88%86%E5%89%B2"><span class="toc-number">3.6.</span> <span class="toc-text">替换和分割</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#sub%E6%9B%BF%E6%8D%A2"><span class="toc-number">3.6.1.</span> <span class="toc-text">sub替换</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#subn%E6%9B%BF%E6%8D%A2"><span class="toc-number">3.6.2.</span> <span class="toc-text">subn替换</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#split%E5%88%86%E5%89%B2"><span class="toc-number">3.6.3.</span> <span class="toc-text">split分割</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%AD%A3%E5%88%99%E7%BC%93%E5%AD%98"><span class="toc-number">3.7.</span> <span class="toc-text">正则缓存</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%BF%9B%E9%98%B6%E7%94%A8%E6%B3%95"><span class="toc-number">4.</span> <span class="toc-text">进阶用法</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%9D%9E%E8%B4%AA%E5%A9%AA%E5%8C%B9%E9%85%8D"><span class="toc-number">4.1.</span> <span class="toc-text">非贪婪匹配</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%86%E7%BB%84%E5%8C%B9%E9%85%8D-%E6%8D%95%E8%8E%B7%E7%BB%84"><span class="toc-number">4.2.</span> <span class="toc-text">分组匹配(捕获组)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BD%AC%E4%B9%89%E5%8C%B9%E9%85%8D%E6%9B%BF%E4%BB%A3%E5%87%BD%E6%95%B0"><span class="toc-number">4.3.</span> <span class="toc-text">转义匹配替代函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#re%E5%A2%9E%E5%BC%BA%E7%9A%84%E5%8C%85%E8%A3%85"><span class="toc-number">4.4.</span> <span class="toc-text">re增强的包装</span></a></li></ol></li></ol></div></div></div></div></main><footer id="footer" style="background-image: url('https://pic.hycbook.com/i/hexo/config_imgs/footer_bg.webp')"><div id="footer-wrap"><div class="copyright">&copy;2022 - 2024 By narutohyc</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener external nofollow noreferrer" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text"><p><a target="_blank" href="https://hexo.io/" rel="external nofollow noreferrer"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Frame-Hexo-blue?style=flat&logo=hexo" title="博客框架为Hexo"></a>&nbsp;<a target="_blank" href="https://demo.jerryc.me/" rel="external nofollow noreferrer"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Theme-Butterfly-6513df?style=flat&logo=bitdefender" title="主题采用butterfly"></a>&nbsp;<a target="_blank" href="https://vercel.com/ " rel="external nofollow noreferrer"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Hosted-Vervel-brightgreen?style=flat&logo=Vercel" title="本站采用双线部署，默认线路托管于Vercel"></a>&nbsp;<a target="_blank" href="https://github.com/" rel="external nofollow noreferrer"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Source-Github-d021d6?style=flat&logo=GitHub" title="本站项目由Gtihub托管"></a>&nbsp;<a target="_blank" href="https://zixiaoyun.com" rel="external nofollow noreferrer"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/图床-薄荷图床-green" title="薄荷图床"></a></p><a target="_blank" href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=35020502000647" rel="external nofollow noreferrer"><img style="position:relative;top:4px" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://pic.hycbook.com/i//hexo/config_imgs//备案图标.webp" alt="ICP"/>闽公网安备35020502000647号  </a><a href="https://beian.miit.gov.cn/" rel="external nofollow noreferrer" target="_blank">闽ICP备2023021562号-1</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">简</button><!-- button#darkmode(type="button" title=_p('rightside.night_mode_title'))--><!--  i.fas.fa-adjust--><a class="icon-V hidden" onclick="switchNightMode()" title="浅色和深色模式转换"><svg width="25" height="25" viewBox="0 0 1024 1024"><use id="modeicon" xlink:href="#icon-moon"></use></svg></a><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="fa-solid fa-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="fa-solid fa-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="fa-solid fa-arrow-rotate-right"></i></div><div class="rightMenu-item" id="menu-home"><i class="fa-solid fa-house"></i></div></div><div class="rightMenu-group rightMenu-line hide" id="menu-text"><a class="rightMenu-item" href="javascript:window.open(&quot;https://www.baidu.com/s?wd=&quot;+window.getSelection().toString());window.location.reload();" rel="external nofollow noreferrer"><i class="fas fa-comment"></i><span>百度搜索</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" href="/archives/"><i class="fa-solid fa-archive"></i><span>文章归档</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="fa-solid fa-folder-open"></i><span>文章分类</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="fa-solid fa-tags"></i><span>文章标签</span></a></div><div class="rightMenu-group rightMenu-line rightMenuNormal"><a class="rightMenu-item menu-link" id="menu-radompage"><i class="fa-solid fa-shoe-prints"></i><span>随便逛逛</span></a><div class="rightMenu-item" id="menu-translate"><i class="fa-solid fa-earth-asia"></i><span>繁简切换</span></div><div class="rightMenu-item" id="menu-darkmode"><i class="fa-solid fa-moon"></i><span>切换模式</span></div></div></div><div id="rightmenu-mask"></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>(() => {
  const $mermaidWrap = document.querySelectorAll('#article-container .mermaid-wrap')
  if ($mermaidWrap.length) {
    window.runMermaid = () => {
      window.loadMermaid = true
      const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? '' : ''

      Array.from($mermaidWrap).forEach((item, index) => {
        const mermaidSrc = item.firstElementChild
        const mermaidThemeConfig = '%%{init:{ \'theme\':\'' + theme + '\'}}%%\n'
        const mermaidID = 'mermaid-' + index
        const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent
        mermaid.mermaidAPI.render(mermaidID, mermaidDefinition, (svgCode) => {
          mermaidSrc.insertAdjacentHTML('afterend', svgCode)
        })
      })
    }

    const loadMermaid = () => {
      window.loadMermaid ? runMermaid() : getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(runMermaid)
    }

    window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
  }
})()</script><script>(()=>{
  const init = () => {
    twikoo.init(Object.assign({
      el: '#twikoo-wrap',
      envId: 'https://vercel.hycbook.com',
      region: '',
      onCommentLoaded: function () {
        btf.loadLightbox(document.querySelectorAll('#twikoo .tk-content img:not(.tk-owo-emotion)'))
      }
    }, null))
  }

  const getCount = () => {
    const countELement = document.getElementById('twikoo-count')
    if(!countELement) return
    twikoo.getCommentsCount({
      envId: 'https://vercel.hycbook.com',
      region: '',
      urls: [window.location.pathname],
      includeReply: false
    }).then(function (res) {
      countELement.innerText = res[0].count
    }).catch(function (err) {
      console.error(err);
    });
  }

  const runFn = () => {
    init()
    GLOBAL_CONFIG_SITE.isPost && getCount()
  }

  const loadTwikoo = () => {
    if (typeof twikoo === 'object') {
      setTimeout(runFn,0)
      return
    } 
    getScript('https://cdn.jsdelivr.net/npm/twikoo/dist/twikoo.all.min.js').then(runFn)
  }

  if ('Twikoo' === 'Twikoo' || !false) {
    if (false) btf.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else loadTwikoo()
  } else {
    window.loadOtherComment = () => {
      loadTwikoo()
    }
  }
})()</script><script>function loadValine () {
  function initValine () {
    const valine = new Valine(Object.assign({
      el: '#vcomment',
      appId: 'ncn88uooQf0IO2rrGE7Vniwp-gzGzoHsz',
      appKey: 'Yghpzg1QfBMFJ0MxxHubVzKL',
      avatar: 'monsterid',
      serverURLs: '',
      emojiMaps: "",
      path: window.location.pathname,
      visitor: true
    }, null))
  }

  if (typeof Valine === 'function') initValine() 
  else getScript('https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js').then(initValine)
}

if ('Twikoo' === 'Valine' || !false) {
  if (false) btf.loadComment(document.getElementById('vcomment'),loadValine)
  else setTimeout(loadValine, 0)
} else {
  function loadOtherComment () {
    loadValine()
  }
}</script></div><script>window.addEventListener('load', () => {
  const changeContent = (content) => {
    if (content === '') return content

    content = content.replace(/<img.*?src="(.*?)"?[^\>]+>/ig, '[图片]') // replace image link
    content = content.replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi, '[链接]') // replace url
    content = content.replace(/<pre><code>.*?<\/pre>/gi, '[代码]') // replace code
    content = content.replace(/<[^>]+>/g,"") // remove html tag

    if (content.length > 150) {
      content = content.substring(0,150) + '...'
    }
    return content
  }

  const getComment = () => {
    const runTwikoo = () => {
      twikoo.getRecentComments({
        envId: 'https://vercel.hycbook.com',
        region: '',
        pageSize: 3,
        includeReply: true
      }).then(function (res) {
        const twikooArray = res.map(e => {
          return {
            'content': changeContent(e.comment),
            'avatar': e.avatar,
            'nick': e.nick,
            'url': e.url + '#' + e.id,
            'date': new Date(e.created).toISOString()
          }
        })

        saveToLocal.set('twikoo-newest-comments', JSON.stringify(twikooArray), 10/(60*24))
        generateHtml(twikooArray)
      }).catch(function (err) {
        const $dom = document.querySelector('#card-newest-comments .aside-list')
        $dom.innerHTML= "无法获取评论，请确认相关配置是否正确"
      })
    }

    if (typeof twikoo === 'object') {
      runTwikoo()
    } else {
      getScript('https://cdn.jsdelivr.net/npm/twikoo/dist/twikoo.all.min.js').then(runTwikoo)
    }
  }

  const generateHtml = array => {
    let result = ''

    if (array.length) {
      for (let i = 0; i < array.length; i++) {
        result += '<div class=\'aside-list-item\'>'

        if (true) {
          const name = 'data-lazy-src'
          result += `<a href='${array[i].url}' class='thumbnail'><img ${name}='${array[i].avatar}' alt='${array[i].nick}'></a>`
        }
        
        result += `<div class='content'>
        <a class='comment' href='${array[i].url}' title='${array[i].content}'>${array[i].content}</a>
        <div class='name'><span>${array[i].nick} / </span><time datetime="${array[i].date}">${btf.diffDate(array[i].date, true)}</time></div>
        </div></div>`
      }
    } else {
      result += '没有评论'
    }

    let $dom = document.querySelector('#card-newest-comments .aside-list')
    $dom.innerHTML= result
    window.lazyLoadInstance && window.lazyLoadInstance.update()
    window.pjax && window.pjax.refresh($dom)
  }

  const newestCommentInit = () => {
    if (document.querySelector('#card-newest-comments .aside-list')) {
      const data = saveToLocal.get('twikoo-newest-comments')
      if (data) {
        generateHtml(JSON.parse(data))
      } else {
        getComment()
      }
    }
  }

  newestCommentInit()
  document.addEventListener('pjax:complete', newestCommentInit)
})</script><script defer src="https://npm.elemecdn.com/jquery@latest/dist/jquery.min.js"></script><script defer data-pjax src="/zhheo/random.js"></script><script data-pjax src="/js/coin.js"></script><script defer src="https://npm.elemecdn.com/vue@2.6.11"></script><script async src="//at.alicdn.com/t/c/font_3670467_a0sijt8frxo.js"></script><script defer src="/live2d-widget/autoload.js"></script><script defer src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script><script data-pjax defer src="https://npm.elemecdn.com/tzy-blog/lib/js/theme/chocolate.js"></script><script defer data-pjax src="/js/rightMenu.js"></script><script defer data-pjax src="/js/udf_mouse.js"></script><script defer data-pjax src="/js/udf_js.js"></script><script defer src="/js/udf_js.js"></script><script defer="defer" id="fluttering_ribbon" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-fluttering-ribbon.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = false;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><script id="click-heart" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/click-heart.min.js" async="async" mobile="true"></script><script>window.$crisp = [];
window.CRISP_WEBSITE_ID = "561b80db-3f0f-45cb-b3b1-aae7355939e6";
(function () {
  d = document;
  s = d.createElement("script");
  s.src = "https://client.crisp.chat/l.js";
  s.async = 1;
  d.getElementsByTagName("head")[0].appendChild(s);
})();
$crisp.push(["safe", true])

if (false) {
  $crisp.push(["do", "chat:hide"])
  $crisp.push(["on", "chat:closed", function() {
    $crisp.push(["do", "chat:hide"])
  }])
  var chatBtnFn = () => {
    var chatBtn = document.getElementById("chat_btn")
    chatBtn.addEventListener("click", function(){
      $crisp.push(["do", "chat:show"])
      $crisp.push(["do", "chat:open"])

    });
  }
  chatBtnFn()
} else {
  if (false) {
    function chatBtnHide () {
      $crisp.push(["do", "chat:hide"])
    }
    function chatBtnShow () {
      $crisp.push(["do", "chat:show"])
    }
  }
}</script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener scroll 
  window.tocScrollFn && window.removeEventListener('scroll', window.tocScrollFn)
  window.scrollCollect && window.removeEventListener('scroll', scrollCollect)

  typeof preloader === 'object' && preloader.initLoading()
  document.getElementById('rightside').style.cssText = "opacity: ''; transform: ''"
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

  typeof disqusjs === 'object' && disqusjs.destroy()
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()

  typeof preloader === 'object' && preloader.endLoading()
})

document.addEventListener('pjax:error', (e) => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div class="app-refresh" id="app-refresh" style="position: fixed;top: -2.2rem;left: 0;right: 0;z-index: 99999;padding: 0 1rem;font-size: 15px;height: 2.2rem;transition: all 0.3s ease;"><div class="app-refresh-wrap" style=" display: flex;color: #fff;height: 100%;align-items: center;justify-content: center;"><label>✨ 兼一书虫上新啦！ 👉</label><a href="javascript:void(0)" rel="external nofollow noreferrer" onclick="location.reload()"><span style="color: #fff;text-decoration: underline;cursor: pointer;">🍭查看新品🍬</span></a></div></div><script>if ('serviceWorker' in navigator) {
  if (navigator.serviceWorker.controller) {
    navigator.serviceWorker.addEventListener('controllerchange', function() {
      showNotification()
    })
  }
  window.addEventListener('load', function() {
    navigator.serviceWorker.register('/sw.js')
  })
}

function showNotification() {
  if (GLOBAL_CONFIG.Snackbar) {
    var snackbarBg =
      document.documentElement.getAttribute('data-theme') === 'light' ?
      GLOBAL_CONFIG.Snackbar.bgLight :
      GLOBAL_CONFIG.Snackbar.bgDark
    var snackbarPos = GLOBAL_CONFIG.Snackbar.position
    Snackbar.show({
      text: '✨ 兼一书虫上新啦！ 👉',
      backgroundColor: snackbarBg,
      duration: 500000,
      pos: snackbarPos,
      actionText: '🍭查看新品🍬',
      actionTextColor: '#fff',
      onActionClick: function(e) {
        location.reload()
      },
    })
  } else {
    var showBg =
      document.documentElement.getAttribute('data-theme') === 'light' ?
      '#49b1f5' :
      '#1f1f1f'
    var cssText = `top: 0; background: ${showBg};`
    document.getElementById('app-refresh')
      .style.cssText = cssText
  }
}</script></div><!-- hexo injector body_end start --><script async src="//at.alicdn.com/t/font_2032782_8d5kxvn09md.js"></script><!-- hexo injector body_end end --></body></html>